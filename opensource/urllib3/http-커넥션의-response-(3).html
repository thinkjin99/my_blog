<!DOCTYPE html> <html><head>
		<title>HTTP 커넥션의 response (3)</title>
		<base href="../../">
		<meta id="root-path" root-path="../../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="my_study - HTTP 커넥션의 response (3)">
		<meta property="og:title" content="HTTP 커넥션의 response (3)">
		<meta property="og:description" content="my_study - HTTP 커넥션의 response (3)">
		<meta property="og:type" content="website">
		<meta property="og:url" content="opensource/urllib3/http-커넥션의-response-(3).html">
		<meta property="og:image" content="undefined">
		<meta property="og:site_name" content="my_study">
		<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="preload" href="lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="lib/styles/theme.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/supported-plugins.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript><link rel="preload" href="lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/snippets.css"></noscript></head><body class="publish css-settings-manager theme-light show-inline-title show-ribbon code-styler code-styler-style-inline code-styler-gutter-highlight"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles">mjx-mfrac{display:inline-block;text-align:left}mjx-frac{display:inline-block;vertical-align:.17em;padding:0 .22em}mjx-frac[type="d"]{vertical-align:.04em}mjx-frac[delims]{padding:0 .1em}mjx-frac[atop]{padding:0 .12em}mjx-frac[atop][delims]{padding:0}mjx-dtable{display:inline-table;width:100%}mjx-dtable>*{font-size:2000%}mjx-dbox{display:block;font-size:5%}mjx-num{display:block;text-align:center}mjx-den{display:block;text-align:center}mjx-mfrac[bevelled]>mjx-num{display:inline-block}mjx-mfrac[bevelled]>mjx-den{display:inline-block}mjx-den[align=right],mjx-num[align=right]{text-align:right}mjx-den[align=left],mjx-num[align=left]{text-align:left}mjx-nstrut{display:inline-block;height:.054em;width:0;vertical-align:-.054em}mjx-nstrut[type="d"]{height:.217em;vertical-align:-.217em}mjx-dstrut{display:inline-block;height:.505em;width:0}mjx-dstrut[type="d"]{height:.726em}mjx-line{display:block;box-sizing:border-box;min-height:1px;height:.06em;border-top:.06em solid;margin:.06em -.1em;overflow:hidden}mjx-line[type="d"]{margin:.18em -.1em}mjx-mrow{display:inline-block;text-align:left}mjx-mspace{display:inline-block;text-align:left}mjx-c.mjx-c30::before{padding:.666em .5em .022em 0;content:"0"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c34::before{padding:.677em .5em 0 0;content:"4"}mjx-c.mjx-c37::before{padding:.676em .5em .022em 0;content:"7"}mjx-c.mjx-c33::before{padding:.665em .5em .022em 0;content:"3"}mjx-c.mjx-c36::before{padding:.666em .5em .022em 0;content:"6"}mjx-c.mjx-c1D463.TEX-I::before{padding:.443em .485em .011em 0;content:"v"}mjx-c.mjx-c1D45F.TEX-I::before{padding:.442em .451em .011em 0;content:"r"}mjx-c.mjx-c1D44E.TEX-I::before{padding:.441em .529em .01em 0;content:"a"}mjx-c.mjx-c1D454.TEX-I::before{padding:.442em .477em .205em 0;content:"g"}mjx-c.mjx-c1D460.TEX-I::before{padding:.442em .469em .01em 0;content:"s"}mjx-c.mjx-c1D45C.TEX-I::before{padding:.441em .485em .011em 0;content:"o"}mjx-c.mjx-c1D45B.TEX-I::before{padding:.442em .6em .011em 0;content:"n"}mjx-c.mjx-c1D447.TEX-I::before{padding:.677em .704em 0 0;content:"T"}mjx-c.mjx-c35::before{padding:.666em .5em .022em 0;content:"5"}mjx-c.mjx-c2E::before{padding:.12em .278em 0 0;content:"."}mjx-msub{display:inline-block;text-align:left}mjx-c.mjx-c1D436.TEX-I::before{padding:.705em .76em .022em 0;content:"C"}mjx-c.mjx-c1D434.TEX-I::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c1D449.TEX-I::before{padding:.683em .769em .022em 0;content:"V"}mjx-c.mjx-c1D445.TEX-I::before{padding:.683em .759em .021em 0;content:"R"}mjx-c.mjx-c1D443.TEX-I::before{padding:.683em .751em 0 0;content:"P"}mjx-c.mjx-c1D456.TEX-I::before{padding:.661em .345em .011em 0;content:"i"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block;text-align:left}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-mi{display:inline-block;text-align:left}mjx-mn{display:inline-block;text-align:left}mjx-msup{display:inline-block;text-align:left}mjx-texatom{display:inline-block;text-align:left}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c1D45D.TEX-I::before{padding:.442em .503em .194em 0;content:"p"}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-c.mjx-c2C::before{padding:.121em .278em .194em 0;content:","}mjx-c.mjx-c1D45E.TEX-I::before{padding:.442em .46em .194em 0;content:"q"}mjx-c.mjx-c1D452.TEX-I::before{padding:.442em .466em .011em 0;content:"e"}mjx-c.mjx-c1D451.TEX-I::before{padding:.694em .52em .01em 0;content:"d"}mjx-c.mjx-c1D441.TEX-I::before{padding:.683em .888em 0 0;content:"N"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c1D45A.TEX-I::before{padding:.442em .878em .011em 0;content:"m"}mjx-c.mjx-c1D450.TEX-I::before{padding:.442em .433em .011em 0;content:"c"}mjx-c.mjx-c6D::before{padding:.442em .833em 0 0;content:"m"}mjx-c.mjx-c6F::before{padding:.448em .5em .01em 0;content:"o"}mjx-c.mjx-c64::before{padding:.694em .556em .011em 0;content:"d"}mjx-c.mjx-c1D458.TEX-I::before{padding:.694em .521em .011em 0;content:"k"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}</style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="HTTP 커넥션의 response (3)"><p dir="auto">HTTP 커넥션의 response (3)</p></h1><div class="heading-wrapper"><h3 data-heading="출처" dir="auto" class="heading" id="출처"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>출처</h3><div class="heading-children"><div><ul dir="auto">
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="https://urllib3.readthedocs.io/en/stable/reference/urllib3.response.html#urllib3.response.BaseHTTPResponse" rel="noopener" class="external-link" href="https://urllib3.readthedocs.io/en/stable/reference/urllib3.response.html#urllib3.response.BaseHTTPResponse" target="_blank">urlib3.Response</a></li>
<li data-line="1" dir="auto"><a data-tooltip-position="top" aria-label="https://docs.python.org/ko/3/library/http.client.html#httpconnection-objects" rel="noopener" class="external-link" href="https://docs.python.org/ko/3/library/http.client.html#httpconnection-objects" target="_blank">http.client</a></li>
</ul></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="개요" dir="auto" class="heading" id="개요"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>개요</h3><div class="heading-children"><div><ul dir="auto">
<li data-line="0" dir="auto"><a data-href="#HTTP Response 받는 법" href="#HTTP_Response_받는_법" class="internal-link" target="_self" rel="noopener">HTTP Response 받는 법</a></li>
<li data-line="1" dir="auto"><a data-href="#urllib3.getresponse()" href="#urllib3.getresponse()" class="internal-link" target="_self" rel="noopener">urllib3.getresponse()</a></li>
<li data-line="2" dir="auto"><a data-href="#http.getresponse()" href="#http.getresponse()" class="internal-link" target="_self" rel="noopener">http.getresponse()</a></li>
<li data-line="3" dir="auto"><a data-href="#http.HTTPResponse" href="#http.HTTPResponse" class="internal-link" target="_self" rel="noopener">http.HTTPResponse</a></li>
<li data-line="4" dir="auto"><a data-href="#urllib3.HTTPResponse" href="#urllib3.HTTPResponse" class="internal-link" target="_self" rel="noopener">urllib3.HTTPResponse</a></li>
</ul></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="HTTP Response 받는 법" dir="auto" class="heading" id="HTTP_Response_받는_법"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>HTTP Response 받는 법</h3><div class="heading-children"><div><p dir="auto">우리는 이전까지  urllib3에서 어떻게 요청을 전송 하는지를 확인했다. 이하에서는 어떻게 응답을 수신하고 처리 하는지를 확인한다. 응답에 대한 작업이 처음 모습을 드러내는 곳은 커넥션 풀의 <code class="code-styler-inline">make_request</code> 메서드이다. 아래 코드를 보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">class</span> <span class="token class-name">HTTPConnectionPool</span><span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token comment">#send request and do something..</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	
	<span class="token keyword">try</span><span class="token punctuation">:</span>
        response <span class="token operator">=</span> conn<span class="token punctuation">.</span>getresponse<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> <span class="token punctuation">(</span>BaseSSLError<span class="token punctuation">,</span> OSError<span class="token punctuation">)</span> <span class="token keyword">as</span> e<span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>_raise_timeout<span class="token punctuation">(</span>err<span class="token operator">=</span>e<span class="token punctuation">,</span> url<span class="token operator">=</span>url<span class="token punctuation">,</span> timeout_value<span class="token operator">=</span>read_timeout<span class="token punctuation">)</span>
            <span class="token keyword">raise</span>

	<span class="token comment"># Set properties that are used by the pooling layer.</span>
	response<span class="token punctuation">.</span>retries <span class="token operator">=</span> retries
	response<span class="token punctuation">.</span>_connection <span class="token operator">=</span> response_conn  <span class="token comment"># type: ignore[attr-defined]</span>
	response<span class="token punctuation">.</span>_pool <span class="token operator">=</span> self  <span class="token comment"># type: ignore[attr-defined]</span>

	
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">해당 코드는 <code class="code-styler-inline">make_request</code> 메서드 내부로 이 메서드는 커넥션 풀에서 특정 커넥션을 추출해 요청을 전송하고 이에 대한 응답을 처리하는 작업을 수행한다. 이는 일전의 <a data-tooltip-position="top" aria-label="HTTPConnection 부터 send까지 (1) > HTTPConnectionPool.urlopen" data-href="HTTPConnection 부터 send까지 (1)#HTTPConnectionPool.urlopen" href="opensource/urllib3/httpconnection-부터-send까지-(1).html#HTTPConnectionPool.urlopen" class="internal-link" target="_self" rel="noopener">urlopen</a> 에서 설명한 메서드로 실질적인 요청의 전송 및 응답을 처리하는 작업을 진행한다.</p></div><div><p dir="auto">응답을 얻어오는 부부만 확인해보면, <code class="code-styler-inline">getresponse</code> 객체를 활용해 응답을 확보하는 것을 확인할 수 있다. 이제 <code class="code-styler-inline">getresponse</code>로 이동해보자.</p></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="urllib3.getresponse()" dir="auto" class="heading" id="urllib3.getresponse()"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>urllib3.getresponse()</h3><div class="heading-children"><div><p dir="auto">응답을 획득하는 함수는 아래와 같이 동작한다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">def</span> <span class="token function">getresponse</span><span class="token punctuation">(</span>  <span class="token comment"># type: ignore[override]</span>
        self<span class="token punctuation">,</span>
    <span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> HTTPResponse<span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""
        Get the response from the server.

        If the HTTPConnection is in the correct state, returns an instance of HTTPResponse or of whatever object is returned by the response_class variable.

        If a request has not been sent or if a previous response has not be handled, ResponseNotReady is raised. If the HTTP response indicates that the connection should be closed, then it will be closed before the response is returned. When the connection is closed, the underlying socket is closed.
        """</span>
        <span class="token comment"># Raise the same error as http.client.HTTPConnection</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_response_options <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> ResponseNotReady<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># Reset this attribute for being used again.</span>
        resp_options <span class="token operator">=</span> self<span class="token punctuation">.</span>_response_options
        self<span class="token punctuation">.</span>_response_options <span class="token operator">=</span> <span class="token boolean">None</span>

        <span class="token comment"># Since the connection's timeout value may have been updated</span>
        <span class="token comment"># we need to set the timeout on the socket.</span>
        self<span class="token punctuation">.</span>sock<span class="token punctuation">.</span>settimeout<span class="token punctuation">(</span>self<span class="token punctuation">.</span>timeout<span class="token punctuation">)</span>

        <span class="token comment"># This is needed here to avoid circular import errors</span>
        <span class="token keyword">from</span> <span class="token punctuation">.</span>response <span class="token keyword">import</span> HTTPResponse

        <span class="token comment"># Get the response from http.client.HTTPConnection</span>
        httplib_response <span class="token operator">=</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>getresponse<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">try</span><span class="token punctuation">:</span>
            assert_header_parsing<span class="token punctuation">(</span>httplib_response<span class="token punctuation">.</span>msg<span class="token punctuation">)</span>
        <span class="token keyword">except</span> <span class="token punctuation">(</span>HeaderParsingError<span class="token punctuation">,</span> TypeError<span class="token punctuation">)</span> <span class="token keyword">as</span> hpe<span class="token punctuation">:</span>
            log<span class="token punctuation">.</span>warning<span class="token punctuation">(</span>
                <span class="token string">"Failed to parse headers (url=%s): %s"</span><span class="token punctuation">,</span>
                _url_from_connection<span class="token punctuation">(</span>self<span class="token punctuation">,</span> resp_options<span class="token punctuation">.</span>request_url<span class="token punctuation">)</span><span class="token punctuation">,</span>
                hpe<span class="token punctuation">,</span>
                exc_info<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span>

        headers <span class="token operator">=</span> HTTPHeaderDict<span class="token punctuation">(</span>httplib_response<span class="token punctuation">.</span>msg<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

        response <span class="token operator">=</span> HTTPResponse<span class="token punctuation">(</span>
            body<span class="token operator">=</span>httplib_response<span class="token punctuation">,</span>
            headers<span class="token operator">=</span>headers<span class="token punctuation">,</span>
            status<span class="token operator">=</span>httplib_response<span class="token punctuation">.</span>status<span class="token punctuation">,</span>
            version<span class="token operator">=</span>httplib_response<span class="token punctuation">.</span>version<span class="token punctuation">,</span>
            reason<span class="token operator">=</span>httplib_response<span class="token punctuation">.</span>reason<span class="token punctuation">,</span>
            preload_content<span class="token operator">=</span>resp_options<span class="token punctuation">.</span>preload_content<span class="token punctuation">,</span>
            decode_content<span class="token operator">=</span>resp_options<span class="token punctuation">.</span>decode_content<span class="token punctuation">,</span>
            original_response<span class="token operator">=</span>httplib_response<span class="token punctuation">,</span>
            enforce_content_length<span class="token operator">=</span>resp_options<span class="token punctuation">.</span>enforce_content_length<span class="token punctuation">,</span>
            request_method<span class="token operator">=</span>resp_options<span class="token punctuation">.</span>request_method<span class="token punctuation">,</span>
            request_url<span class="token operator">=</span>resp_options<span class="token punctuation">.</span>request_url<span class="token punctuation">,</span>
        <span class="token punctuation">)</span>
        <span class="token keyword">return</span> response
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">코드는 길지만 요약하면 결국 <code class="code-styler-inline">super.getresponse()</code> 에서 실질적인 응답을 가져오고 이를 통해 얻은 응답 객체를 urrllib3 자체 <code class="code-styler-inline">HTTPResponse</code> 객체로 변환하는 작업을 수행한다. 해당 메서드는  <code class="code-styler-inline">HTTPConnection</code> 내부에 존재하고 이의 부모 클래스는 파이썬 내장 라이브러리인 <code class="code-styler-inline">http</code> 의 <code class="code-styler-inline">HTTPConnection</code>이므로 응답 처리는 파이썬의 기본 내장 함수를 활용해 처리하고 있다 할 수 있다.<br>
다이어그램으로 표현하면 아래와 같다.</p></div><div><div class="mermaid"><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 211.9375 137.59375" height="137.59375" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="211.9375" id="m0707294a57402a34"><style>#m0707294a57402a34{font-family:var(--font-mermaid);font-size:16px;fill:var(--text-normal);}#m0707294a57402a34 .error-icon{fill:var(--background-primary);}#m0707294a57402a34 .error-text{fill:var(--text-error);stroke:var(--text-error);}#m0707294a57402a34 .edge-thickness-normal{stroke-width:2px;}#m0707294a57402a34 .edge-thickness-thick{stroke-width:3.5px;}#m0707294a57402a34 .edge-pattern-solid{stroke-dasharray:0;}#m0707294a57402a34 .edge-pattern-dashed{stroke-dasharray:3;}#m0707294a57402a34 .edge-pattern-dotted{stroke-dasharray:2;}#m0707294a57402a34 .marker{fill:var(--text-normal);stroke:var(--text-normal);}#m0707294a57402a34 .marker.cross{stroke:var(--text-normal);}#m0707294a57402a34 svg{font-family:var(--font-mermaid);font-size:16px;}#m0707294a57402a34 .label{font-family:var(--font-mermaid);color:var(--text-normal);}#m0707294a57402a34 .cluster-label text{fill:var(--text-normal);}#m0707294a57402a34 .cluster-label span,#m0707294a57402a34 p{color:var(--text-normal);}#m0707294a57402a34 .label text,#m0707294a57402a34 span,#m0707294a57402a34 p{fill:var(--text-normal);color:var(--text-normal);}#m0707294a57402a34 .node rect,#m0707294a57402a34 .node circle,#m0707294a57402a34 .node ellipse,#m0707294a57402a34 .node polygon,#m0707294a57402a34 .node path{fill:var(--background-primary);stroke:var(--text-muted);stroke-width:1px;}#m0707294a57402a34 .flowchart-label text{text-anchor:middle;}#m0707294a57402a34 .node .label{text-align:center;}#m0707294a57402a34 .node.clickable{cursor:pointer;}#m0707294a57402a34 .arrowheadPath{fill:#0b0b0b;}#m0707294a57402a34 .edgePath .path{stroke:var(--text-normal);stroke-width:2.0px;}#m0707294a57402a34 .flowchart-link{stroke:var(--text-normal);fill:none;}#m0707294a57402a34 .edgeLabel{background-color:var(--background-secondary);text-align:center;}#m0707294a57402a34 .edgeLabel rect{opacity:0.5;background-color:var(--background-secondary);fill:var(--background-secondary);}#m0707294a57402a34 .labelBkg{background-color:var(--background-secondary);}#m0707294a57402a34 .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#m0707294a57402a34 .cluster text{fill:var(--text-normal);}#m0707294a57402a34 .cluster span,#m0707294a57402a34 p{color:var(--text-normal);}#m0707294a57402a34 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:var(--font-mermaid);font-size:12px;background:var(--background-secondary-alt);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#m0707294a57402a34 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:var(--text-normal);}#m0707294a57402a34 foreignObject{overflow:visible;}#m0707294a57402a34 #arrowhead,#m0707294a57402a34 #sequencenumber,#m0707294a57402a34 .cluster text,#m0707294a57402a34 .label text,#m0707294a57402a34 text,#m0707294a57402a34 text.actor{fill:var(--text-normal);}#m0707294a57402a34 line{stroke:var(--text-normal);}#m0707294a57402a34 g&gt;g&gt;circle,#m0707294a57402a34 g&gt;g&gt;path{stroke:var(--background-accent);color:var(--text-normal);}#m0707294a57402a34 .label rect{display:none;}#m0707294a57402a34 .cluster rect{stroke-width:1px;}#m0707294a57402a34 .node circle,#m0707294a57402a34 .node ellipse,#m0707294a57402a34 .node path,#m0707294a57402a34 .node polygon,#m0707294a57402a34 .node rect{fill:var(--background-secondary-alt);stroke:var(--background-modifier-border);stroke-width:1px;}#m0707294a57402a34 .node .label{text-align:center;}#m0707294a57402a34 .node.clickable{cursor:pointer;}#m0707294a57402a34 .arrowheadPath{fill:var(--text-muted);}#m0707294a57402a34 .edgePath .path{stroke:var(--text-muted);stroke-width:1.5px;}#m0707294a57402a34 .edgeLabel{background-color:var(--background-primary);text-align:center;}#m0707294a57402a34 .cluster rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border);}#m0707294a57402a34 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-size:12px;background:var(--background-secondary);border:1px solid var(--interactive-accent);border-radius:2px;pointer-events:none;z-index:100;}#m0707294a57402a34 .actor{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt);font-family:inherit!important;}#m0707294a57402a34 text.actor{stroke:none;}#m0707294a57402a34 .actor-line{stroke:var(--text-muted);}#m0707294a57402a34 .messageLine0,#m0707294a57402a34 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:var(--text-normal);}#m0707294a57402a34 #crosshead path{fill:var(--text-normal)!important;stroke:var(--text-normal)!important;}#m0707294a57402a34 .messageText{fill:var(--text-normal);stroke:none;font-family:inherit!important;}#m0707294a57402a34 .labelBox{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt);}#m0707294a57402a34 .labelText,#m0707294a57402a34 .loopText{fill:var(--text-normal);stroke:none;}#m0707294a57402a34 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:var(--background-modifier-border);}#m0707294a57402a34 .activation0,#m0707294a57402a34 .activation1,#m0707294a57402a34 .activation2{fill:var(--background-secondary) stroke:var(--text-muted);}#m0707294a57402a34 .section{stroke:none;opacity:.2;}#m0707294a57402a34 .section0,#m0707294a57402a34 .section2{fill:var(--text-accent);}#m0707294a57402a34 .section1,#m0707294a57402a34 .section3{fill:#fff;opacity:.2;}#m0707294a57402a34 .sectionTitle0,#m0707294a57402a34 .sectionTitle1,#m0707294a57402a34 .sectionTitle2,#m0707294a57402a34 .sectionTitle3{fill:var(--text-normal);}#m0707294a57402a34 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;}#m0707294a57402a34 .grid .tick{stroke:var(--background-primary-alt);opacity:.8;shape-rendering:crispEdges;}#m0707294a57402a34 .grid path{stroke-width:0;}#m0707294a57402a34 .today{fill:none;stroke:#d42;stroke-width:2px;}#m0707294a57402a34 .task{stroke-width:2;}#m0707294a57402a34 .taskText{text-anchor:middle;}#m0707294a57402a34 .taskText:not([font-size]){font-size:11px;}#m0707294a57402a34 .taskTextOutsideRight{fill:var(--text-normal);text-anchor:start;font-size:11px;}#m0707294a57402a34 .taskTextOutsideLeft{fill:var(--text-normal);text-anchor:end;font-size:11px;}#m0707294a57402a34 .task.clickable,#m0707294a57402a34 g.clickable{cursor:pointer;}#m0707294a57402a34 .taskText.clickable,#m0707294a57402a34 .taskTextOutsideLeft.clickable,#m0707294a57402a34 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:700;}#m0707294a57402a34 .taskText0,#m0707294a57402a34 .taskText1,#m0707294a57402a34 .taskText2,#m0707294a57402a34 .taskText3{fill:#fff;}#m0707294a57402a34 .task0,#m0707294a57402a34 .task1,#m0707294a57402a34 .task2,#m0707294a57402a34 .task3{fill:var(--interactive-accent);stroke:var(--interactive-accent);}#m0707294a57402a34 .taskTextOutside0,#m0707294a57402a34 .taskTextOutside1,#m0707294a57402a34 .taskTextOutside2,#m0707294a57402a34 .taskTextOutside3{fill:var(--text-normal);}#m0707294a57402a34 .active0,#m0707294a57402a34 .active1,#m0707294a57402a34 .active2,#m0707294a57402a34 .active3,#m0707294a57402a34 g.classGroup rect,#m0707294a57402a34 g.stateGroup rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border);}#m0707294a57402a34 g.classGroup rect,#m0707294a57402a34 g.stateGroup rect{stroke:var(--background-modifier-border);}#m0707294a57402a34 .activeText0,#m0707294a57402a34 .activeText1,#m0707294a57402a34 .activeText2,#m0707294a57402a34 .activeText3{fill:var(--text-normal)!important;}#m0707294a57402a34 .done0,#m0707294a57402a34 .done1,#m0707294a57402a34 .done2,#m0707294a57402a34 .done3{stroke:var(--text-muted);fill:#bbb;stroke-width:2;}#m0707294a57402a34 .doneText0,#m0707294a57402a34 .doneText1,#m0707294a57402a34 .doneText2,#m0707294a57402a34 .doneText3{fill:var(--text-normal)!important;}#m0707294a57402a34 .crit0,#m0707294a57402a34 .crit1,#m0707294a57402a34 .crit2,#m0707294a57402a34 .crit3{stroke:#b1361b;fill:#d42;stroke-width:2;}#m0707294a57402a34 .activeCrit0,#m0707294a57402a34 .activeCrit1,#m0707294a57402a34 .activeCrit2,#m0707294a57402a34 .activeCrit3,#m0707294a57402a34 .classLabel .box{stroke:#b1361b;fill:var(--background-secondary-alt);stroke-width:2;}#m0707294a57402a34 .classLabel .box{stroke:none;stroke-width:0;opacity:.5;}#m0707294a57402a34 .doneCrit0,#m0707294a57402a34 .doneCrit1,#m0707294a57402a34 .doneCrit2,#m0707294a57402a34 .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges;}#m0707294a57402a34 .milestone{transform:rotate(45deg) scale(.8,.8);}#m0707294a57402a34 .milestoneText{font-style:italic;}#m0707294a57402a34 .activeCritText0,#m0707294a57402a34 .activeCritText1,#m0707294a57402a34 .activeCritText2,#m0707294a57402a34 .activeCritText3,#m0707294a57402a34 .doneCritText0,#m0707294a57402a34 .doneCritText1,#m0707294a57402a34 .doneCritText2,#m0707294a57402a34 .doneCritText3{fill:var(--text-normal)!important;}#m0707294a57402a34 .titleText{text-anchor:middle;font-size:18px;fill:var(--text-normal);}#m0707294a57402a34 g.classGroup text{fill:var(--text-normal);stroke:none;font-size:11px;}#m0707294a57402a34 g.classGroup text .title{font-weight:bolder;}#m0707294a57402a34 #aggregationEnd,#m0707294a57402a34 #aggregationStart,#m0707294a57402a34 #compositionEnd,#m0707294a57402a34 #compositionStart,#m0707294a57402a34 g.classGroup line,#m0707294a57402a34 g.stateGroup line{stroke:var(--background-modifier-border);stroke-width:1;}#m0707294a57402a34 .classLabel .label{font-size:11px;}#m0707294a57402a34 .relation{fill:none;}#m0707294a57402a34 .dashed-line{stroke-dasharray:3;}#m0707294a57402a34 #compositionEnd,#m0707294a57402a34 #compositionStart{fill:var(--background-modifier-border);}#m0707294a57402a34 #aggregationEnd,#m0707294a57402a34 #aggregationStart{fill:var(--background-secondary-alt);}#m0707294a57402a34 #dependencyEnd,#m0707294a57402a34 #dependencyStart,#m0707294a57402a34 #extensionEnd,#m0707294a57402a34 #extensionStart{fill:var(--background-modifier-border);stroke:var(--background-modifier-border);stroke-width:1;}#m0707294a57402a34 .branch-label,#m0707294a57402a34 .commit-id,#m0707294a57402a34 .commit-msg{fill:#d3d3d3;color:#d3d3d3;}#m0707294a57402a34 .pieTitleText{text-anchor:middle;font-size:25px;fill:var(--text-normal);}#m0707294a57402a34 .state-note text,#m0707294a57402a34 g.stateGroup text{stroke:none;font-size:10px;}#m0707294a57402a34 g.stateGroup .state-title{font-weight:bolder;fill:var(--text-normal);}#m0707294a57402a34 .stateGroup .composit{fill:#fff;border-bottom:1px;}#m0707294a57402a34 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#m0707294a57402a34 .state-note{stroke:#645c10;fill:#f3edb3;}#m0707294a57402a34 .state-note text{fill:#000;}#m0707294a57402a34 .stateLabel .box{stroke:none;stroke-width:0;fill:var(--background-secondary-alt);opacity:.5;}#m0707294a57402a34 .stateLabel text{fill:var(--text-normal);font-size:10px;font-weight:700;}#m0707294a57402a34 .node circle.state-start{fill:var(--text-normal);stroke:var(--text-normal);}#m0707294a57402a34 .node circle.state-end{stroke:var(--background-primary);stroke-width:2;}#m0707294a57402a34 #statediagram-barbEnd,#m0707294a57402a34 g.stateGroup text{fill:var(--background-modifier-border);}#m0707294a57402a34 .statediagram-cluster rect{stroke-width:1px;}#m0707294a57402a34 .statediagram-cluster rect,#m0707294a57402a34 .statediagram-state .divider{stroke:var(--background-modifier-border);}#m0707294a57402a34 .statediagram-cluster rect .inner{fill:var(--background-secondary-alt);}#m0707294a57402a34 .statediagram-cluster.statediagram-cluster-alt .inner{fill:var(--background-secondary);}#m0707294a57402a34 .cluster-label text,#m0707294a57402a34 .node circle.state-end{fill:var(--text-normal);}#m0707294a57402a34 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:var(--background-secondary);}#m0707294a57402a34 .note-edge{stroke-dasharray:5;}#m0707294a57402a34 .statediagram-note rect{fill:#f3edb3;stroke:#645c10;stroke-width:1px;}#m0707294a57402a34 .error-icon{fill:var(--background-modifier-error);}#m0707294a57402a34 .error-text{fill:var(--text-error);stroke:var(--text-error);}#m0707294a57402a34 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" class="marker flowchart" id="m0707294a57402a34-m0707294a57402a34_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart" id="m0707294a57402a34-m0707294a57402a34_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="m0707294a57402a34-m0707294a57402a34_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="m0707294a57402a34-m0707294a57402a34_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="m0707294a57402a34-m0707294a57402a34_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="m0707294a57402a34-m0707294a57402a34_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#m0707294a57402a34-m0707294a57402a34_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-urllib3.HTTPConnection LE-http.HTTPConnection" id="L-urllib3.HTTPConnection-http.HTTPConnection-0" d="M97.969,85.797L97.969,81.63C97.969,77.464,97.969,69.13,97.969,61.68C97.969,54.23,97.969,47.664,97.969,44.38L97.969,41.097"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(97.96875, 103.6953125)" id="flowchart-urllib3.HTTPConnection-206" class="node default default flowchart-label"><rect height="35.796875" width="195.9375" y="-17.8984375" x="-97.96875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-90.46875, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="180.9375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">urllib3.HTTPConnection</span></div></foreignObject></g></g><g transform="translate(97.96875, 17.8984375)" id="flowchart-http.HTTPConnection-207" class="node default default flowchart-label"><rect height="35.796875" width="179.484375" y="-17.8984375" x="-89.7421875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-82.2421875, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="164.484375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">http.HTTPConnection</span></div></foreignObject></g></g></g></g></g></svg></div></div><div><p dir="auto">이제 진짜 응답을 처리하는 <code class="code-styler-inline">http.getresponse</code>를 확인해보자.</p></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="http.getresponse()" dir="auto" class="heading" id="http.getresponse()"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>http.getresponse()</h3><div class="heading-children"><div><p dir="auto">실제 응답을 처리하는 코드는 아래와 같다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">def</span> <span class="token function">getresponse</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token triple-quoted-string string">"""Get the response from the server.

	If the HTTPConnection is in the correct state, returns an
	instance of HTTPResponse or of whatever object is returned by
	the response_class variable.

	If a request has not been sent or if a previous response has
	not be handled, ResponseNotReady is raised.  If the HTTP
	response indicates that the connection should be closed, then
	it will be closed before the response is returned.  When the
	connection is closed, the underlying socket is closed.
	"""</span>

	<span class="token comment"># if a prior response has been completed, then forget about it.</span>
	<span class="token keyword">if</span> self<span class="token punctuation">.</span>__response <span class="token keyword">and</span> self<span class="token punctuation">.</span>__response<span class="token punctuation">.</span>isclosed<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		self<span class="token punctuation">.</span>__response <span class="token operator">=</span> <span class="token boolean">None</span>

	<span class="token comment"># if a prior response exists, then it must be completed (otherwise, we</span>
	<span class="token comment"># cannot read this response's header to determine the connection-close</span>
	<span class="token comment"># behavior)</span>
	<span class="token comment">#</span>
	<span class="token comment"># note: if a prior response existed, but was connection-close, then the</span>
	<span class="token comment"># socket and response were made independent of this HTTPConnection</span>
	<span class="token comment"># object since a new request requires that we open a whole new</span>
	<span class="token comment"># connection</span>
	<span class="token comment">#</span>
	<span class="token comment"># this means the prior response had one of two states:</span>
	<span class="token comment">#   1) will_close: this connection was reset and the prior socket and</span>
	<span class="token comment">#                  response operate independently</span>
	<span class="token comment">#   2) persistent: the response was retained and we await its</span>
	<span class="token comment">#                  isclosed() status to become true.</span>
	<span class="token comment">#</span>
	<span class="token keyword">if</span> self<span class="token punctuation">.</span>__state <span class="token operator">!=</span> _CS_REQ_SENT <span class="token keyword">or</span> self<span class="token punctuation">.</span>__response<span class="token punctuation">:</span>
		<span class="token keyword">raise</span> ResponseNotReady<span class="token punctuation">(</span>self<span class="token punctuation">.</span>__state<span class="token punctuation">)</span>

	<span class="token keyword">if</span> self<span class="token punctuation">.</span>debuglevel <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
		response <span class="token operator">=</span> self<span class="token punctuation">.</span>response_class<span class="token punctuation">(</span>self<span class="token punctuation">.</span>sock<span class="token punctuation">,</span> self<span class="token punctuation">.</span>debuglevel<span class="token punctuation">,</span>
									   method<span class="token operator">=</span>self<span class="token punctuation">.</span>_method<span class="token punctuation">)</span>
	<span class="token keyword">else</span><span class="token punctuation">:</span>
		response <span class="token operator">=</span> self<span class="token punctuation">.</span>response_class<span class="token punctuation">(</span>self<span class="token punctuation">.</span>sock<span class="token punctuation">,</span> method<span class="token operator">=</span>self<span class="token punctuation">.</span>_method<span class="token punctuation">)</span>

	<span class="token keyword">try</span><span class="token punctuation">:</span>
		<span class="token keyword">try</span><span class="token punctuation">:</span>
			response<span class="token punctuation">.</span>begin<span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">except</span> ConnectionError<span class="token punctuation">:</span>
			self<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token keyword">raise</span>
		<span class="token keyword">assert</span> response<span class="token punctuation">.</span>will_close <span class="token operator">!=</span> _UNKNOWN
		self<span class="token punctuation">.</span>__state <span class="token operator">=</span> _CS_IDLE

		<span class="token keyword">if</span> response<span class="token punctuation">.</span>will_close<span class="token punctuation">:</span>
			<span class="token comment"># this effectively passes the connection to the response</span>
			self<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">else</span><span class="token punctuation">:</span>
			<span class="token comment"># remember this, so we can tell when it is complete</span>
			self<span class="token punctuation">.</span>__response <span class="token operator">=</span> response

		<span class="token keyword">return</span> response
	<span class="token keyword">except</span><span class="token punctuation">:</span>
		response<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">raise</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><code class="code-styler-inline">response_class</code> 를 활용해 응답 객체를 생성하고 해당 객체 내부의 <code class="code-styler-inline">begin</code> 메서드를 실행한 후 이 객체를 반환하는 방식으로 동작한다. 응답 객체를 생성하는 <code class="code-styler-inline">response_class</code> 메서드 내부를 들여다보자.</p></div><div><p dir="auto">놀랍게도 <code class="code-styler-inline">response_class</code>는 메서드가 아니라 클래스이다. HTTPConenction 내부에서 <code class="code-styler-inline">response_class = HTTPResponse</code> 으로 정의하고 있기 때문에 우리가 생성하는 응답 객체는 HTTPResponse가 된다.</p></div><div><p dir="auto">그러면 이제 HTTPResponse 객체를 살펴보자. 여기에 모든 내용이 전부 정리돼 있을 것이다.</p></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="http.HTTPResponse" dir="auto" class="heading" id="http.HTTPResponse"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>http.HTTPResponse</h3><div class="heading-children"><div><p dir="auto">우선적으로 위에서도 사용한 메서드인 <code class="code-styler-inline">begin</code> 부터 확인해보자. 이 메서드는 <strong>본격적인 응답 읽기 작업을 수행하기에 앞서 응답의 헤더와 상태코드 청킹 여부 컨텐츠 길이 등을 파악하는 작업을 수행한다.</strong> 응답의 본문은 방치하고 본문을 읽기 위해 필요한 헤더 정보들을 우선적으로 추출하는 메서드라 생각하면 쉽다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">def</span> <span class="token function">begin</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token keyword">if</span> self<span class="token punctuation">.</span>headers <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
		<span class="token comment"># we've already started reading the response</span>
		<span class="token keyword">return</span>

	<span class="token comment"># read until we get a non-100 response</span>
	<span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
		version<span class="token punctuation">,</span> status<span class="token punctuation">,</span> reason <span class="token operator">=</span> self<span class="token punctuation">.</span>_read_status<span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> status <span class="token operator">!=</span> CONTINUE<span class="token punctuation">:</span>
			<span class="token keyword">break</span>
		<span class="token comment"># skip the header from the 100 response</span>
		skipped_headers <span class="token operator">=</span> _read_headers<span class="token punctuation">(</span>self<span class="token punctuation">.</span>fp<span class="token punctuation">)</span>
		<span class="token keyword">if</span> self<span class="token punctuation">.</span>debuglevel <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
			<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"headers:"</span><span class="token punctuation">,</span> skipped_headers<span class="token punctuation">)</span>
		<span class="token keyword">del</span> skipped_headers

	self<span class="token punctuation">.</span>code <span class="token operator">=</span> self<span class="token punctuation">.</span>status <span class="token operator">=</span> status
	self<span class="token punctuation">.</span>reason <span class="token operator">=</span> reason<span class="token punctuation">.</span>strip<span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> version <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">"HTTP/1.0"</span><span class="token punctuation">,</span> <span class="token string">"HTTP/0.9"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		<span class="token comment"># Some servers might still return "0.9", treat it as 1.0 anyway</span>
		self<span class="token punctuation">.</span>version <span class="token operator">=</span> <span class="token number">10</span>
	<span class="token keyword">elif</span> version<span class="token punctuation">.</span>startswith<span class="token punctuation">(</span><span class="token string">"HTTP/1."</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		self<span class="token punctuation">.</span>version <span class="token operator">=</span> <span class="token number">11</span>   <span class="token comment"># use HTTP/1.1 code for HTTP/1.x where x&gt;=1</span>
	<span class="token keyword">else</span><span class="token punctuation">:</span>
		<span class="token keyword">raise</span> UnknownProtocol<span class="token punctuation">(</span>version<span class="token punctuation">)</span>

	self<span class="token punctuation">.</span>headers <span class="token operator">=</span> self<span class="token punctuation">.</span>msg <span class="token operator">=</span> parse_headers<span class="token punctuation">(</span>self<span class="token punctuation">.</span>fp<span class="token punctuation">)</span>

	<span class="token keyword">if</span> self<span class="token punctuation">.</span>debuglevel <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
		<span class="token keyword">for</span> hdr<span class="token punctuation">,</span> val <span class="token keyword">in</span> self<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
			<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"header:"</span><span class="token punctuation">,</span> hdr <span class="token operator">+</span> <span class="token string">":"</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span>

	<span class="token comment"># are we using the chunked-style of transfer encoding?</span>
	tr_enc <span class="token operator">=</span> self<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"transfer-encoding"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> tr_enc <span class="token keyword">and</span> tr_enc<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">"chunked"</span><span class="token punctuation">:</span>
		self<span class="token punctuation">.</span>chunked <span class="token operator">=</span> <span class="token boolean">True</span>
		self<span class="token punctuation">.</span>chunk_left <span class="token operator">=</span> <span class="token boolean">None</span>
	<span class="token keyword">else</span><span class="token punctuation">:</span>
		self<span class="token punctuation">.</span>chunked <span class="token operator">=</span> <span class="token boolean">False</span>

	<span class="token comment"># will the connection close at the end of the response?</span>
	self<span class="token punctuation">.</span>will_close <span class="token operator">=</span> self<span class="token punctuation">.</span>_check_close<span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment"># do we have a Content-Length?</span>
	<span class="token comment"># NOTE: RFC 2616, S4.4, #3 says we ignore this if tr_enc is "chunked"</span>
	self<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token boolean">None</span>
	length <span class="token operator">=</span> self<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">"content-length"</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> length <span class="token keyword">and</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>chunked<span class="token punctuation">:</span>
		<span class="token keyword">try</span><span class="token punctuation">:</span>
			self<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>length<span class="token punctuation">)</span>
		<span class="token keyword">except</span> ValueError<span class="token punctuation">:</span>
			self<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token boolean">None</span>
		<span class="token keyword">else</span><span class="token punctuation">:</span>
			<span class="token keyword">if</span> self<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>  <span class="token comment"># ignore nonsensical negative lengths</span>
				self<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token boolean">None</span>
	<span class="token keyword">else</span><span class="token punctuation">:</span>
		self<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token boolean">None</span>

	<span class="token comment"># does the body have a fixed length? (of zero)</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">==</span> NO_CONTENT <span class="token keyword">or</span> status <span class="token operator">==</span> NOT_MODIFIED <span class="token keyword">or</span>
		<span class="token number">100</span> <span class="token operator">&lt;=</span> status <span class="token operator">&lt;</span> <span class="token number">200</span> <span class="token keyword">or</span>      <span class="token comment"># 1xx codes</span>
		self<span class="token punctuation">.</span>_method <span class="token operator">==</span> <span class="token string">"HEAD"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		self<span class="token punctuation">.</span>length <span class="token operator">=</span> <span class="token number">0</span>

	<span class="token comment"># if the connection remains open, and we aren't using chunked, and</span>
	<span class="token comment"># a content-length was not provided, then assume that the connection</span>
	<span class="token comment"># WILL close.</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">not</span> self<span class="token punctuation">.</span>will_close <span class="token keyword">and</span>
		<span class="token keyword">not</span> self<span class="token punctuation">.</span>chunked <span class="token keyword">and</span>
		self<span class="token punctuation">.</span>length <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
		self<span class="token punctuation">.</span>will_close <span class="token operator">=</span> <span class="token boolean">True</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">따라서 begin만 진행한다고 해서 응답 데이터를 읽을 수 있는 것이 아니다. 별도의 read 작업을 수행해줘야 실질적인 응답 데이터를 읽는 것이 가능하다.</p></div><div><p dir="auto">이제 다시 돌아가보자. 우리는 아래의 순서를 통해 들어왔다.</p></div><div><div class="mermaid"><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 305.3203125 309.1875" height="309.1875" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="305.3203125" id="mdfd3237c8701191a"><style>#mdfd3237c8701191a{font-family:var(--font-mermaid);font-size:16px;fill:var(--text-normal);}#mdfd3237c8701191a .error-icon{fill:var(--background-primary);}#mdfd3237c8701191a .error-text{fill:var(--text-error);stroke:var(--text-error);}#mdfd3237c8701191a .edge-thickness-normal{stroke-width:2px;}#mdfd3237c8701191a .edge-thickness-thick{stroke-width:3.5px;}#mdfd3237c8701191a .edge-pattern-solid{stroke-dasharray:0;}#mdfd3237c8701191a .edge-pattern-dashed{stroke-dasharray:3;}#mdfd3237c8701191a .edge-pattern-dotted{stroke-dasharray:2;}#mdfd3237c8701191a .marker{fill:var(--text-normal);stroke:var(--text-normal);}#mdfd3237c8701191a .marker.cross{stroke:var(--text-normal);}#mdfd3237c8701191a svg{font-family:var(--font-mermaid);font-size:16px;}#mdfd3237c8701191a .label{font-family:var(--font-mermaid);color:var(--text-normal);}#mdfd3237c8701191a .cluster-label text{fill:var(--text-normal);}#mdfd3237c8701191a .cluster-label span,#mdfd3237c8701191a p{color:var(--text-normal);}#mdfd3237c8701191a .label text,#mdfd3237c8701191a span,#mdfd3237c8701191a p{fill:var(--text-normal);color:var(--text-normal);}#mdfd3237c8701191a .node rect,#mdfd3237c8701191a .node circle,#mdfd3237c8701191a .node ellipse,#mdfd3237c8701191a .node polygon,#mdfd3237c8701191a .node path{fill:var(--background-primary);stroke:var(--text-muted);stroke-width:1px;}#mdfd3237c8701191a .flowchart-label text{text-anchor:middle;}#mdfd3237c8701191a .node .label{text-align:center;}#mdfd3237c8701191a .node.clickable{cursor:pointer;}#mdfd3237c8701191a .arrowheadPath{fill:#0b0b0b;}#mdfd3237c8701191a .edgePath .path{stroke:var(--text-normal);stroke-width:2.0px;}#mdfd3237c8701191a .flowchart-link{stroke:var(--text-normal);fill:none;}#mdfd3237c8701191a .edgeLabel{background-color:var(--background-secondary);text-align:center;}#mdfd3237c8701191a .edgeLabel rect{opacity:0.5;background-color:var(--background-secondary);fill:var(--background-secondary);}#mdfd3237c8701191a .labelBkg{background-color:var(--background-secondary);}#mdfd3237c8701191a .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#mdfd3237c8701191a .cluster text{fill:var(--text-normal);}#mdfd3237c8701191a .cluster span,#mdfd3237c8701191a p{color:var(--text-normal);}#mdfd3237c8701191a div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:var(--font-mermaid);font-size:12px;background:var(--background-secondary-alt);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#mdfd3237c8701191a .flowchartTitleText{text-anchor:middle;font-size:18px;fill:var(--text-normal);}#mdfd3237c8701191a foreignObject{overflow:visible;}#mdfd3237c8701191a #arrowhead,#mdfd3237c8701191a #sequencenumber,#mdfd3237c8701191a .cluster text,#mdfd3237c8701191a .label text,#mdfd3237c8701191a text,#mdfd3237c8701191a text.actor{fill:var(--text-normal);}#mdfd3237c8701191a line{stroke:var(--text-normal);}#mdfd3237c8701191a g&gt;g&gt;circle,#mdfd3237c8701191a g&gt;g&gt;path{stroke:var(--background-accent);color:var(--text-normal);}#mdfd3237c8701191a .label rect{display:none;}#mdfd3237c8701191a .cluster rect{stroke-width:1px;}#mdfd3237c8701191a .node circle,#mdfd3237c8701191a .node ellipse,#mdfd3237c8701191a .node path,#mdfd3237c8701191a .node polygon,#mdfd3237c8701191a .node rect{fill:var(--background-secondary-alt);stroke:var(--background-modifier-border);stroke-width:1px;}#mdfd3237c8701191a .node .label{text-align:center;}#mdfd3237c8701191a .node.clickable{cursor:pointer;}#mdfd3237c8701191a .arrowheadPath{fill:var(--text-muted);}#mdfd3237c8701191a .edgePath .path{stroke:var(--text-muted);stroke-width:1.5px;}#mdfd3237c8701191a .edgeLabel{background-color:var(--background-primary);text-align:center;}#mdfd3237c8701191a .cluster rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border);}#mdfd3237c8701191a div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-size:12px;background:var(--background-secondary);border:1px solid var(--interactive-accent);border-radius:2px;pointer-events:none;z-index:100;}#mdfd3237c8701191a .actor{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt);font-family:inherit!important;}#mdfd3237c8701191a text.actor{stroke:none;}#mdfd3237c8701191a .actor-line{stroke:var(--text-muted);}#mdfd3237c8701191a .messageLine0,#mdfd3237c8701191a .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:var(--text-normal);}#mdfd3237c8701191a #crosshead path{fill:var(--text-normal)!important;stroke:var(--text-normal)!important;}#mdfd3237c8701191a .messageText{fill:var(--text-normal);stroke:none;font-family:inherit!important;}#mdfd3237c8701191a .labelBox{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt);}#mdfd3237c8701191a .labelText,#mdfd3237c8701191a .loopText{fill:var(--text-normal);stroke:none;}#mdfd3237c8701191a .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:var(--background-modifier-border);}#mdfd3237c8701191a .activation0,#mdfd3237c8701191a .activation1,#mdfd3237c8701191a .activation2{fill:var(--background-secondary) stroke:var(--text-muted);}#mdfd3237c8701191a .section{stroke:none;opacity:.2;}#mdfd3237c8701191a .section0,#mdfd3237c8701191a .section2{fill:var(--text-accent);}#mdfd3237c8701191a .section1,#mdfd3237c8701191a .section3{fill:#fff;opacity:.2;}#mdfd3237c8701191a .sectionTitle0,#mdfd3237c8701191a .sectionTitle1,#mdfd3237c8701191a .sectionTitle2,#mdfd3237c8701191a .sectionTitle3{fill:var(--text-normal);}#mdfd3237c8701191a .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;}#mdfd3237c8701191a .grid .tick{stroke:var(--background-primary-alt);opacity:.8;shape-rendering:crispEdges;}#mdfd3237c8701191a .grid path{stroke-width:0;}#mdfd3237c8701191a .today{fill:none;stroke:#d42;stroke-width:2px;}#mdfd3237c8701191a .task{stroke-width:2;}#mdfd3237c8701191a .taskText{text-anchor:middle;}#mdfd3237c8701191a .taskText:not([font-size]){font-size:11px;}#mdfd3237c8701191a .taskTextOutsideRight{fill:var(--text-normal);text-anchor:start;font-size:11px;}#mdfd3237c8701191a .taskTextOutsideLeft{fill:var(--text-normal);text-anchor:end;font-size:11px;}#mdfd3237c8701191a .task.clickable,#mdfd3237c8701191a g.clickable{cursor:pointer;}#mdfd3237c8701191a .taskText.clickable,#mdfd3237c8701191a .taskTextOutsideLeft.clickable,#mdfd3237c8701191a .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:700;}#mdfd3237c8701191a .taskText0,#mdfd3237c8701191a .taskText1,#mdfd3237c8701191a .taskText2,#mdfd3237c8701191a .taskText3{fill:#fff;}#mdfd3237c8701191a .task0,#mdfd3237c8701191a .task1,#mdfd3237c8701191a .task2,#mdfd3237c8701191a .task3{fill:var(--interactive-accent);stroke:var(--interactive-accent);}#mdfd3237c8701191a .taskTextOutside0,#mdfd3237c8701191a .taskTextOutside1,#mdfd3237c8701191a .taskTextOutside2,#mdfd3237c8701191a .taskTextOutside3{fill:var(--text-normal);}#mdfd3237c8701191a .active0,#mdfd3237c8701191a .active1,#mdfd3237c8701191a .active2,#mdfd3237c8701191a .active3,#mdfd3237c8701191a g.classGroup rect,#mdfd3237c8701191a g.stateGroup rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border);}#mdfd3237c8701191a g.classGroup rect,#mdfd3237c8701191a g.stateGroup rect{stroke:var(--background-modifier-border);}#mdfd3237c8701191a .activeText0,#mdfd3237c8701191a .activeText1,#mdfd3237c8701191a .activeText2,#mdfd3237c8701191a .activeText3{fill:var(--text-normal)!important;}#mdfd3237c8701191a .done0,#mdfd3237c8701191a .done1,#mdfd3237c8701191a .done2,#mdfd3237c8701191a .done3{stroke:var(--text-muted);fill:#bbb;stroke-width:2;}#mdfd3237c8701191a .doneText0,#mdfd3237c8701191a .doneText1,#mdfd3237c8701191a .doneText2,#mdfd3237c8701191a .doneText3{fill:var(--text-normal)!important;}#mdfd3237c8701191a .crit0,#mdfd3237c8701191a .crit1,#mdfd3237c8701191a .crit2,#mdfd3237c8701191a .crit3{stroke:#b1361b;fill:#d42;stroke-width:2;}#mdfd3237c8701191a .activeCrit0,#mdfd3237c8701191a .activeCrit1,#mdfd3237c8701191a .activeCrit2,#mdfd3237c8701191a .activeCrit3,#mdfd3237c8701191a .classLabel .box{stroke:#b1361b;fill:var(--background-secondary-alt);stroke-width:2;}#mdfd3237c8701191a .classLabel .box{stroke:none;stroke-width:0;opacity:.5;}#mdfd3237c8701191a .doneCrit0,#mdfd3237c8701191a .doneCrit1,#mdfd3237c8701191a .doneCrit2,#mdfd3237c8701191a .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges;}#mdfd3237c8701191a .milestone{transform:rotate(45deg) scale(.8,.8);}#mdfd3237c8701191a .milestoneText{font-style:italic;}#mdfd3237c8701191a .activeCritText0,#mdfd3237c8701191a .activeCritText1,#mdfd3237c8701191a .activeCritText2,#mdfd3237c8701191a .activeCritText3,#mdfd3237c8701191a .doneCritText0,#mdfd3237c8701191a .doneCritText1,#mdfd3237c8701191a .doneCritText2,#mdfd3237c8701191a .doneCritText3{fill:var(--text-normal)!important;}#mdfd3237c8701191a .titleText{text-anchor:middle;font-size:18px;fill:var(--text-normal);}#mdfd3237c8701191a g.classGroup text{fill:var(--text-normal);stroke:none;font-size:11px;}#mdfd3237c8701191a g.classGroup text .title{font-weight:bolder;}#mdfd3237c8701191a #aggregationEnd,#mdfd3237c8701191a #aggregationStart,#mdfd3237c8701191a #compositionEnd,#mdfd3237c8701191a #compositionStart,#mdfd3237c8701191a g.classGroup line,#mdfd3237c8701191a g.stateGroup line{stroke:var(--background-modifier-border);stroke-width:1;}#mdfd3237c8701191a .classLabel .label{font-size:11px;}#mdfd3237c8701191a .relation{fill:none;}#mdfd3237c8701191a .dashed-line{stroke-dasharray:3;}#mdfd3237c8701191a #compositionEnd,#mdfd3237c8701191a #compositionStart{fill:var(--background-modifier-border);}#mdfd3237c8701191a #aggregationEnd,#mdfd3237c8701191a #aggregationStart{fill:var(--background-secondary-alt);}#mdfd3237c8701191a #dependencyEnd,#mdfd3237c8701191a #dependencyStart,#mdfd3237c8701191a #extensionEnd,#mdfd3237c8701191a #extensionStart{fill:var(--background-modifier-border);stroke:var(--background-modifier-border);stroke-width:1;}#mdfd3237c8701191a .branch-label,#mdfd3237c8701191a .commit-id,#mdfd3237c8701191a .commit-msg{fill:#d3d3d3;color:#d3d3d3;}#mdfd3237c8701191a .pieTitleText{text-anchor:middle;font-size:25px;fill:var(--text-normal);}#mdfd3237c8701191a .state-note text,#mdfd3237c8701191a g.stateGroup text{stroke:none;font-size:10px;}#mdfd3237c8701191a g.stateGroup .state-title{font-weight:bolder;fill:var(--text-normal);}#mdfd3237c8701191a .stateGroup .composit{fill:#fff;border-bottom:1px;}#mdfd3237c8701191a .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#mdfd3237c8701191a .state-note{stroke:#645c10;fill:#f3edb3;}#mdfd3237c8701191a .state-note text{fill:#000;}#mdfd3237c8701191a .stateLabel .box{stroke:none;stroke-width:0;fill:var(--background-secondary-alt);opacity:.5;}#mdfd3237c8701191a .stateLabel text{fill:var(--text-normal);font-size:10px;font-weight:700;}#mdfd3237c8701191a .node circle.state-start{fill:var(--text-normal);stroke:var(--text-normal);}#mdfd3237c8701191a .node circle.state-end{stroke:var(--background-primary);stroke-width:2;}#mdfd3237c8701191a #statediagram-barbEnd,#mdfd3237c8701191a g.stateGroup text{fill:var(--background-modifier-border);}#mdfd3237c8701191a .statediagram-cluster rect{stroke-width:1px;}#mdfd3237c8701191a .statediagram-cluster rect,#mdfd3237c8701191a .statediagram-state .divider{stroke:var(--background-modifier-border);}#mdfd3237c8701191a .statediagram-cluster rect .inner{fill:var(--background-secondary-alt);}#mdfd3237c8701191a .statediagram-cluster.statediagram-cluster-alt .inner{fill:var(--background-secondary);}#mdfd3237c8701191a .cluster-label text,#mdfd3237c8701191a .node circle.state-end{fill:var(--text-normal);}#mdfd3237c8701191a .statediagram-state rect.divider{stroke-dasharray:10,10;fill:var(--background-secondary);}#mdfd3237c8701191a .note-edge{stroke-dasharray:5;}#mdfd3237c8701191a .statediagram-note rect{fill:#f3edb3;stroke:#645c10;stroke-width:1px;}#mdfd3237c8701191a .error-icon{fill:var(--background-modifier-error);}#mdfd3237c8701191a .error-text{fill:var(--text-error);stroke:var(--text-error);}#mdfd3237c8701191a :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" class="marker flowchart" id="mdfd3237c8701191a-mdfd3237c8701191a_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart" id="mdfd3237c8701191a-mdfd3237c8701191a_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="mdfd3237c8701191a-mdfd3237c8701191a_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="mdfd3237c8701191a-mdfd3237c8701191a_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="mdfd3237c8701191a-mdfd3237c8701191a_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="mdfd3237c8701191a-mdfd3237c8701191a_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mdfd3237c8701191a-mdfd3237c8701191a_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-ConnectionPool.urlopen LE-ConnectionPool.make_request" id="L-ConnectionPool.urlopen-ConnectionPool.make_request-0" d="M144.66,35.797L144.66,39.964C144.66,44.13,144.66,52.464,144.66,59.914C144.66,67.364,144.66,73.93,144.66,77.214L144.66,80.497"></path><path marker-end="url(#mdfd3237c8701191a-mdfd3237c8701191a_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-ConnectionPool.make_request LE-HTTPConnection.getresponse" id="L-ConnectionPool.make_request-HTTPConnection.getresponse-0" d="M144.66,121.594L144.66,125.76C144.66,129.927,144.66,138.26,144.66,145.71C144.66,153.16,144.66,159.727,144.66,163.01L144.66,166.294"></path><path marker-end="url(#mdfd3237c8701191a-mdfd3237c8701191a_flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-HTTPConnection.getresponse LE-super.HTTPConnection.getresponse" id="L-HTTPConnection.getresponse-super.HTTPConnection.getresponse-0" d="M144.66,207.391L144.66,211.557C144.66,215.724,144.66,224.057,144.66,231.507C144.66,238.957,144.66,245.524,144.66,248.807L144.66,252.091"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(144.66015625, 17.8984375)" id="flowchart-ConnectionPool.urlopen-208" class="node default default flowchart-label"><rect height="35.796875" width="196.75" y="-17.8984375" x="-98.375" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-90.875, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="181.75"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">ConnectionPool.urlopen</span></div></foreignObject></g></g><g transform="translate(144.66015625, 103.6953125)" id="flowchart-ConnectionPool.make_request-209" class="node default default flowchart-label"><rect height="35.796875" width="245.484375" y="-17.8984375" x="-122.7421875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-115.2421875, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="230.484375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">ConnectionPool.make_request</span></div></foreignObject></g></g><g transform="translate(144.66015625, 189.4921875)" id="flowchart-HTTPConnection.getresponse-210" class="node default default flowchart-label"><rect height="35.796875" width="243.234375" y="-17.8984375" x="-121.6171875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-114.1171875, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="228.234375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">HTTPConnection.getresponse</span></div></foreignObject></g></g><g transform="translate(144.66015625, 275.2890625)" id="flowchart-super.HTTPConnection.getresponse-211" class="node default default flowchart-label"><rect height="35.796875" width="289.3203125" y="-17.8984375" x="-144.66015625" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-137.16015625, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="274.3203125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">super.HTTPConnection.getresponse</span></div></foreignObject></g></g></g></g></g></svg></div></div><div><p dir="auto"><code class="code-styler-inline">super.HTTPConnection.getresponse</code>는 begin 메서드를 실행한 response를 반환하기 때문에 실질적인 메시지에는 헤더가 존재하지 않고 헤더의 데이터들은 인스턴스의 속성으로 관리되는 상태가 된다. 따라서 커넥션 풀에서 urllib3 자체의 HTTPResponse 객체로 포팅하는 과정을 보면 인스턴스의 속성을 각각 넣어주는 것을 확인할 수 있다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded">	response <span class="token operator">=</span> HTTPResponse<span class="token punctuation">(</span>
		body<span class="token operator">=</span>httplib_response<span class="token punctuation">,</span>
		headers<span class="token operator">=</span>headers<span class="token punctuation">,</span>
		status<span class="token operator">=</span>httplib_response<span class="token punctuation">.</span>status<span class="token punctuation">,</span>
		version<span class="token operator">=</span>httplib_response<span class="token punctuation">.</span>version<span class="token punctuation">,</span>
		reason<span class="token operator">=</span>httplib_response<span class="token punctuation">.</span>reason<span class="token punctuation">,</span>
		preload_content<span class="token operator">=</span>resp_options<span class="token punctuation">.</span>preload_content<span class="token punctuation">,</span>
		decode_content<span class="token operator">=</span>resp_options<span class="token punctuation">.</span>decode_content<span class="token punctuation">,</span>
		original_response<span class="token operator">=</span>httplib_response<span class="token punctuation">,</span>
		enforce_content_length<span class="token operator">=</span>resp_options<span class="token punctuation">.</span>enforce_content_length<span class="token punctuation">,</span>
		request_method<span class="token operator">=</span>resp_options<span class="token punctuation">.</span>request_method<span class="token punctuation">,</span>
		request_url<span class="token operator">=</span>resp_options<span class="token punctuation">.</span>request_url<span class="token punctuation">,</span>
	<span class="token punctuation">)</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">이제 실제 응답 데이터를 어떻게 읽고 관리 하는지를 확인해보자. </p></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="urllib3.HTTPResponse" dir="auto" class="heading" id="urllib3.HTTPResponse"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>urllib3.HTTPResponse</h3><div class="heading-children"><div><p dir="auto"><code class="code-styler-inline">urlopen</code>을 수행하고 나면 그 결과로 <code class="code-styler-inline">begin</code> 메서드가 실행된 <code class="code-styler-inline">http.HTTPResponse</code>를 포팅한 <code class="code-styler-inline">urlli3b.HTTPResponse</code>가 반환된다는 것까지 확인했다. 그렇다면 우리가 실질적으로 <code class="code-styler-inline">urlopen</code>을 수행하고 난뒤 전달된 결과 값을 어떻게 읽고 조작하는 것일까?</p></div><div><p dir="auto"><code class="code-styler-inline">urlli3b.HTTPResponse</code>에 대한 공식 문서의 설명은 다음과 같다. 요약하면 <strong>http 모듈의 응답 객체와 비슷하지만, data라는 속성을 통해 미리 가공돼 있는 본문 데이터에 곧장 접근할 수 있다는 차이점이 존재한다.</strong> 또한 io객체를 상속 받아 readble하다는 특징을 갖는다.</p></div><div><blockquote dir="auto">
<p dir="auto">Backwards-compatible with&nbsp;<a data-tooltip-position="top" aria-label="https://docs.python.org/3/library/http.client.html#http.client.HTTPResponse" rel="noopener" class="external-link" title="(in Python v3.12)" href="https://docs.python.org/3/library/http.client.html#http.client.HTTPResponse" target="_blank"><code class="code-styler-inline">http.client.HTTPResponse</code></a>&nbsp;but the <strong>response&nbsp;<code class="code-styler-inline">body</code>&nbsp;is loaded and decoded on-demand when the&nbsp;<code class="code-styler-inline">data</code>&nbsp;property is accessed.</strong> This class is also compatible with the Python standard library’s&nbsp;<a data-tooltip-position="top" aria-label="https://docs.python.org/3/library/io.html#module-io" rel="noopener" class="external-link" title="(in Python v3.12)" href="https://docs.python.org/3/library/io.html#module-io" target="_blank"><code class="code-styler-inline">io</code></a>&nbsp;module, and can hence be treated as a readable object in the context of that framework. Extra parameters for behaviour not present in&nbsp;<a data-tooltip-position="top" aria-label="https://docs.python.org/3/library/http.client.html#http.client.HTTPResponse" rel="noopener" class="external-link" title="(in Python v3.12)" href="https://docs.python.org/3/library/http.client.html#http.client.HTTPResponse" target="_blank"><code class="code-styler-inline">http.client.HTTPResponse</code></a>:</p>
</blockquote></div><div><p dir="auto">이제 코드를 한번 살펴보자. 아래는 간단한 urllib3 사용 예제이다. 확인해보면 data 속성에 접근하는 것 만으로 본문 데이터를 확인하는 것을 볼 수 있다. 어떻게 가능할까?</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">import</span> urllib3

resp <span class="token operator">=</span> urllib3<span class="token punctuation">.</span>request<span class="token punctuation">(</span><span class="token string">"GET"</span><span class="token punctuation">,</span> <span class="token string">"https://httpbin.org/robots.txt"</span><span class="token punctuation">)</span>
resp<span class="token punctuation">.</span>status
<span class="token operator">&gt;&gt;</span> <span class="token number">200</span>
resp<span class="token punctuation">.</span>data
<span class="token operator">&gt;&gt;</span> <span class="token string">b"User-agent: *\nDisallow: /deny\n"</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">class</span> <span class="token class-name">HTTPResponse</span><span class="token punctuation">(</span>BaseHTTPResponse<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token decorator annotation punctuation">@property</span>
	 <span class="token keyword">def</span> <span class="token function">data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">bytes</span><span class="token punctuation">:</span>
        <span class="token comment"># For backwards-compat with earlier urllib3 0.4 and earlier.</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_body<span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>_body  <span class="token comment"># type: ignore[return-value]</span>

        <span class="token keyword">if</span> self<span class="token punctuation">.</span>_fp<span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>read<span class="token punctuation">(</span>cache_content<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

        <span class="token keyword">return</span> <span class="token boolean">None</span>  <span class="token comment"># type: ignore[return-value]</span>

</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">우리가 <code class="code-styler-inline">data</code> 속성을 입력했을 때 <code class="code-styler-inline">@property</code>에 의해 위의 메서드가 실행되고 이에 따라 <code class="code-styler-inline">_body</code>혹은 <code class="code-styler-inline">read</code> 메서드의 결과가 반환된다. <code class="code-styler-inline">_body</code> 가 어떻게 처리 되는지 부터 확인해보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">class</span> <span class="token class-name">HTTPResponse</span><span class="token punctuation">(</span>BaseHTTPResponse<span class="token punctuation">)</span><span class="token punctuation">:</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
	<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">if</span> body <span class="token keyword">and</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">,</span> <span class="token builtin">bytes</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_body <span class="token operator">=</span> body

        self<span class="token punctuation">.</span>_pool <span class="token operator">=</span> pool
        self<span class="token punctuation">.</span>_connection <span class="token operator">=</span> connection

        <span class="token keyword">if</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>body<span class="token punctuation">,</span> <span class="token string">"read"</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_fp <span class="token operator">=</span> body  <span class="token comment"># type: ignore[assignment]</span>

        <span class="token comment"># Are we using the chunked-style of transfer encoding?</span>
        self<span class="token punctuation">.</span>chunk_left<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">|</span> <span class="token boolean">None</span> <span class="token operator">=</span> <span class="token boolean">None</span>

        <span class="token comment"># Determine length of response</span>
        self<span class="token punctuation">.</span>length_remaining <span class="token operator">=</span> self<span class="token punctuation">.</span>_init_length<span class="token punctuation">(</span>request_method<span class="token punctuation">)</span>

        <span class="token comment"># Used to return the correct amount of bytes for partial read()s</span>
        self<span class="token punctuation">.</span>_decoded_buffer <span class="token operator">=</span> BytesQueueBuffer<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># If requested, preload the body.</span>
        <span class="token keyword">if</span> preload_content <span class="token keyword">and</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>_body<span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>_body <span class="token operator">=</span> self<span class="token punctuation">.</span>read<span class="token punctuation">(</span>decode_content<span class="token operator">=</span>decode_content<span class="token punctuation">)</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">HTTPRespnse에 전달되는 body는 높은 확률로 <code class="code-styler-inline">http.HTTPResponse</code> 타입이므로 24번째 줄에서 <code class="code-styler-inline">body</code>를 읽는 작업을 수행한다. 여기서 확인해볼 부분은 preload_content 파라미터이다.<br>
preload_content 파라미터는 응답을 소켓 버퍼로부터 한번에 읽을 지를 결정한다. 이는 <code class="code-styler-inline">urlopen</code> 부터 전달되는 파라미터로 기본적으로 참으로 설정돼 있다. 따라서 위의 기본적인 urllib3 활용하기 예시를 실행하면 24번 줄의 실행 결과가 반환된다.</p></div><div><p dir="auto">이제 거의 다왔다 마지막으로 read 하는 부분만 살펴보자. read는 다음과 같이 처리된다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded">self<span class="token punctuation">.</span>_init_decoder<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> decode_content <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
	decode_content <span class="token operator">=</span> self<span class="token punctuation">.</span>decode_content

<span class="token keyword">if</span> amt <span class="token keyword">and</span> amt <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">:</span>
	<span class="token comment"># Negative numbers and `None` should be treated the same.</span>
	amt <span class="token operator">=</span> <span class="token boolean">None</span>
<span class="token keyword">elif</span> amt <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
	cache_content <span class="token operator">=</span> <span class="token boolean">False</span>

	<span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_decoded_buffer<span class="token punctuation">)</span> <span class="token operator">&gt;=</span> amt<span class="token punctuation">:</span>
		<span class="token keyword">return</span> self<span class="token punctuation">.</span>_decoded_buffer<span class="token punctuation">.</span>get<span class="token punctuation">(</span>amt<span class="token punctuation">)</span>

data <span class="token operator">=</span> self<span class="token punctuation">.</span>_raw_read<span class="token punctuation">(</span>amt<span class="token punctuation">)</span>

flush_decoder <span class="token operator">=</span> amt <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> <span class="token punctuation">(</span>amt <span class="token operator">!=</span> <span class="token number">0</span> <span class="token keyword">and</span> <span class="token keyword">not</span> data<span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token keyword">not</span> data <span class="token keyword">and</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>_decoded_buffer<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
	<span class="token keyword">return</span> data

<span class="token keyword">if</span> amt <span class="token keyword">is</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
	data <span class="token operator">=</span> self<span class="token punctuation">.</span>_decode<span class="token punctuation">(</span>data<span class="token punctuation">,</span> decode_content<span class="token punctuation">,</span> flush_decoder<span class="token punctuation">)</span>
	<span class="token keyword">if</span> cache_content<span class="token punctuation">:</span>
		self<span class="token punctuation">.</span>_body <span class="token operator">=</span> data
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">확인해보면 실질적인 데이터를 읽는 작업은 <code class="code-styler-inline">raw_read</code>에서 이를 디코딩하는 작업은 <code class="code-styler-inline">decode</code>에서 진행됨을 확인할 수 있다. <code class="code-styler-inline">raw_read</code>는 다음과 같은 작업을 수행한다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token builtin">buffer</span> <span class="token operator">=</span> io<span class="token punctuation">.</span>BytesIO<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># Besides `max_chunk_amt` being a maximum chunk size, it</span>
<span class="token comment"># affects memory overhead of reading a response by this</span>
<span class="token comment"># method in CPython.</span>
<span class="token comment"># `c_int_max` equal to 2 GiB - 1 byte is the actual maximum</span>
<span class="token comment"># chunk size that does not lead to an overflow error, but</span>
<span class="token comment"># 256 MiB is a compromise.</span>
max_chunk_amt <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">**</span><span class="token number">28</span>
<span class="token keyword">while</span> amt <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> amt <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">:</span>
	<span class="token keyword">if</span> amt <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
		chunk_amt <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>amt<span class="token punctuation">,</span> max_chunk_amt<span class="token punctuation">)</span>
		amt <span class="token operator">-=</span> chunk_amt
	<span class="token keyword">else</span><span class="token punctuation">:</span>
		chunk_amt <span class="token operator">=</span> max_chunk_amt
	data <span class="token operator">=</span> self<span class="token punctuation">.</span>_fp<span class="token punctuation">.</span>read<span class="token punctuation">(</span>chunk_amt<span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token keyword">not</span> data<span class="token punctuation">:</span>
		<span class="token keyword">break</span>
	<span class="token builtin">buffer</span><span class="token punctuation">.</span>write<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
	<span class="token keyword">del</span> data  <span class="token comment"># to reduce peak memory usage by `max_chunk_amt`.</span>
<span class="token keyword">return</span> <span class="token builtin">buffer</span><span class="token punctuation">.</span>getvalue<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><code class="code-styler-inline">raw_read</code>는 주어진 <code class="code-styler-inline">amt</code> 바이트 수만큼 소켓에서 데이터를 읽고 이를 버퍼로 옮기는 작업을 수행한다. 이후 버퍼에서 해당 값을 한번에 추출해 반환한다. 이 데이터가 data로 반환되고 이후 디코딩 처리돼 문자열의 형태로 우리에게 전달된다.</p></div><div class="mod-footer"></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="opensource/urllib3/http-커넥션의-response-(3).html#HTTP 커넥션의 response (3)"><div class="tree-item-contents heading-link" heading-name="HTTP 커넥션의 response (3)"><span class="tree-item-title">HTTP 커넥션의 response (3)</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="opensource/urllib3/http-커넥션의-response-(3).html#출처"><div class="tree-item-contents heading-link" heading-name="출처"><span class="tree-item-title">출처</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="opensource/urllib3/http-커넥션의-response-(3).html#개요"><div class="tree-item-contents heading-link" heading-name="개요"><span class="tree-item-title">개요</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="opensource/urllib3/http-커넥션의-response-(3).html#HTTP_Response_받는_법"><div class="tree-item-contents heading-link" heading-name="HTTP Response 받는 법"><span class="tree-item-title">HTTP Response 받는 법</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="opensource/urllib3/http-커넥션의-response-(3).html#urllib3.getresponse()"><div class="tree-item-contents heading-link" heading-name="urllib3.getresponse()"><span class="tree-item-title">urllib3.getresponse()</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="opensource/urllib3/http-커넥션의-response-(3).html#http.getresponse()"><div class="tree-item-contents heading-link" heading-name="http.getresponse()"><span class="tree-item-title">http.getresponse()</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="opensource/urllib3/http-커넥션의-response-(3).html#http.HTTPResponse"><div class="tree-item-contents heading-link" heading-name="http.HTTPResponse"><span class="tree-item-title">http.HTTPResponse</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="opensource/urllib3/http-커넥션의-response-(3).html#urllib3.HTTPResponse"><div class="tree-item-contents heading-link" heading-name="urllib3.HTTPResponse"><span class="tree-item-title">urllib3.HTTPResponse</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>