<!DOCTYPE html> <html><head>
		<title>장고 모델 (2)</title>
		<base href="../">
		<meta id="root-path" root-path="../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="my_study - 장고 모델 (2)">
		<meta property="og:title" content="장고 모델 (2)">
		<meta property="og:description" content="my_study - 장고 모델 (2)">
		<meta property="og:type" content="website">
		<meta property="og:url" content="django/장고-모델-(2).html">
		<meta property="og:image" content="undefined">
		<meta property="og:site_name" content="my_study">
		<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="preload" href="lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="lib/styles/theme.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/supported-plugins.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript><link rel="preload" href="lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/snippets.css"></noscript></head><body class="publish css-settings-manager theme-light show-inline-title show-ribbon code-styler code-styler-style-inline code-styler-gutter-highlight"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles">mjx-mfrac{display:inline-block;text-align:left}mjx-frac{display:inline-block;vertical-align:.17em;padding:0 .22em}mjx-frac[type="d"]{vertical-align:.04em}mjx-frac[delims]{padding:0 .1em}mjx-frac[atop]{padding:0 .12em}mjx-frac[atop][delims]{padding:0}mjx-dtable{display:inline-table;width:100%}mjx-dtable>*{font-size:2000%}mjx-dbox{display:block;font-size:5%}mjx-num{display:block;text-align:center}mjx-den{display:block;text-align:center}mjx-mfrac[bevelled]>mjx-num{display:inline-block}mjx-mfrac[bevelled]>mjx-den{display:inline-block}mjx-den[align=right],mjx-num[align=right]{text-align:right}mjx-den[align=left],mjx-num[align=left]{text-align:left}mjx-nstrut{display:inline-block;height:.054em;width:0;vertical-align:-.054em}mjx-nstrut[type="d"]{height:.217em;vertical-align:-.217em}mjx-dstrut{display:inline-block;height:.505em;width:0}mjx-dstrut[type="d"]{height:.726em}mjx-line{display:block;box-sizing:border-box;min-height:1px;height:.06em;border-top:.06em solid;margin:.06em -.1em;overflow:hidden}mjx-line[type="d"]{margin:.18em -.1em}mjx-mrow{display:inline-block;text-align:left}mjx-mspace{display:inline-block;text-align:left}mjx-c.mjx-c30::before{padding:.666em .5em .022em 0;content:"0"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c34::before{padding:.677em .5em 0 0;content:"4"}mjx-c.mjx-c37::before{padding:.676em .5em .022em 0;content:"7"}mjx-c.mjx-c33::before{padding:.665em .5em .022em 0;content:"3"}mjx-c.mjx-c36::before{padding:.666em .5em .022em 0;content:"6"}mjx-c.mjx-c1D463.TEX-I::before{padding:.443em .485em .011em 0;content:"v"}mjx-c.mjx-c1D45F.TEX-I::before{padding:.442em .451em .011em 0;content:"r"}mjx-c.mjx-c1D44E.TEX-I::before{padding:.441em .529em .01em 0;content:"a"}mjx-c.mjx-c1D454.TEX-I::before{padding:.442em .477em .205em 0;content:"g"}mjx-c.mjx-c1D460.TEX-I::before{padding:.442em .469em .01em 0;content:"s"}mjx-c.mjx-c1D45C.TEX-I::before{padding:.441em .485em .011em 0;content:"o"}mjx-c.mjx-c1D45B.TEX-I::before{padding:.442em .6em .011em 0;content:"n"}mjx-c.mjx-c1D447.TEX-I::before{padding:.677em .704em 0 0;content:"T"}mjx-c.mjx-c35::before{padding:.666em .5em .022em 0;content:"5"}mjx-c.mjx-c2E::before{padding:.12em .278em 0 0;content:"."}mjx-msub{display:inline-block;text-align:left}mjx-c.mjx-c1D436.TEX-I::before{padding:.705em .76em .022em 0;content:"C"}mjx-c.mjx-c1D434.TEX-I::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c1D449.TEX-I::before{padding:.683em .769em .022em 0;content:"V"}mjx-c.mjx-c1D445.TEX-I::before{padding:.683em .759em .021em 0;content:"R"}mjx-c.mjx-c1D443.TEX-I::before{padding:.683em .751em 0 0;content:"P"}mjx-c.mjx-c1D456.TEX-I::before{padding:.661em .345em .011em 0;content:"i"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block;text-align:left}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-mi{display:inline-block;text-align:left}mjx-mn{display:inline-block;text-align:left}mjx-msup{display:inline-block;text-align:left}mjx-texatom{display:inline-block;text-align:left}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c1D45D.TEX-I::before{padding:.442em .503em .194em 0;content:"p"}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-c.mjx-c2C::before{padding:.121em .278em .194em 0;content:","}mjx-c.mjx-c1D45E.TEX-I::before{padding:.442em .46em .194em 0;content:"q"}mjx-c.mjx-c1D452.TEX-I::before{padding:.442em .466em .011em 0;content:"e"}mjx-c.mjx-c1D451.TEX-I::before{padding:.694em .52em .01em 0;content:"d"}mjx-c.mjx-c1D441.TEX-I::before{padding:.683em .888em 0 0;content:"N"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c1D45A.TEX-I::before{padding:.442em .878em .011em 0;content:"m"}mjx-c.mjx-c1D450.TEX-I::before{padding:.442em .433em .011em 0;content:"c"}mjx-c.mjx-c6D::before{padding:.442em .833em 0 0;content:"m"}mjx-c.mjx-c6F::before{padding:.448em .5em .01em 0;content:"o"}mjx-c.mjx-c64::before{padding:.694em .556em .011em 0;content:"d"}mjx-c.mjx-c1D458.TEX-I::before{padding:.694em .521em .011em 0;content:"k"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}</style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="장고 모델 (2)"><p dir="auto">장고 모델 (2)</p></h1><div><p dir="auto"><a href="?query=tag:django" class="tag" target="_blank" rel="noopener">#django</a> </p></div><div class="heading-wrapper"><h3 data-heading="출처" dir="auto" class="heading" id="출처"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>출처</h3><div class="heading-children"><div><ul dir="auto">
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="https://corncream.tistory.com/entry/Django-models-save%EC%97%90-updatefields%EB%A5%BC-%EC%82%AC%EC%9A%A9-%ED%95%B4%EC%95%BC%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0" rel="noopener" class="external-link" href="https://corncream.tistory.com/entry/Django-models-save%EC%97%90-updatefields%EB%A5%BC-%EC%82%AC%EC%9A%A9-%ED%95%B4%EC%95%BC%ED%95%98%EB%8A%94-%EC%9D%B4%EC%9C%A0" target="_blank">save 개선하기</a></li>
</ul></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="개요" dir="auto" class="heading" id="개요"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>개요</h3><div class="heading-children"><div><ul dir="auto">
<li data-line="0" dir="auto"><a data-href="#데이터 엑세스" href="#데이터_엑세스" class="internal-link" target="_self" rel="noopener">데이터 엑세스</a></li>
<li data-line="1" dir="auto"><a data-href="#`_meta`와 모델을 파이써닉하게 사용하기" href="#`_meta`와_모델을_파이써닉하게_사용하기" class="internal-link" target="_self" rel="noopener">`_meta`와 모델을 파이써닉하게 사용하기</a></li>
<li data-line="2" dir="auto"><a data-href="#데이터 삽입" href="#데이터_삽입" class="internal-link" target="_self" rel="noopener">데이터 삽입</a></li>
<li data-line="3" dir="auto"><a data-href="#save() 개선하기" href="#save()_개선하기" class="internal-link" target="_self" rel="noopener">save() 개선하기</a></li>
<li data-line="4" dir="auto"><a data-href="#쿼리셋이란" href="#쿼리셋이란" class="internal-link" target="_self" rel="noopener">쿼리셋이란</a></li>
<li data-line="5" dir="auto"><a data-href="#쿼리 셋은 lazy-loading한다" href="#쿼리_셋은_lazy-loading한다" class="internal-link" target="_self" rel="noopener">쿼리 셋은 lazy-loading한다</a></li>
<li data-line="6" dir="auto"><a data-href="#쿼리 셋은 리스트와 거의 흡사하다" href="#쿼리_셋은_리스트와_거의_흡사하다" class="internal-link" target="_self" rel="noopener">쿼리 셋은 리스트와 거의 흡사하다</a></li>
<li data-line="7" dir="auto"><a data-href="#Serializer의 필요성" href="#Serializer의_필요성" class="internal-link" target="_self" rel="noopener">Serializer의 필요성</a></li>
<li data-line="8" dir="auto"><a data-href="#데이터 선택하기" href="#데이터_선택하기" class="internal-link" target="_self" rel="noopener">데이터 선택하기</a></li>
<li data-line="9" dir="auto"><a data-href="#데이터 수정과 삭제" href="#데이터_수정과_삭제" class="internal-link" target="_self" rel="noopener">데이터 수정과 삭제</a></li>
</ul></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="데이터 엑세스" dir="auto" class="heading" id="데이터_엑세스"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>데이터 엑세스</h3><div class="heading-children"><div><p dir="auto">django 내부의 모델을 통해 직접 데이터를 엑세스 해보자. 우선적으로 모델을 활용해 실제 DB에 데이터를 삽입하는 작업부터 진행한다. 데이터는 장고 쉘을 활용해 손쉽게 입력할 수 있다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded">python3 manage<span class="token punctuation">.</span>py shell

<span class="token keyword">from</span> books<span class="token punctuation">.</span>models <span class="token keyword">import</span> Publisher

p1 <span class="token operator">=</span> Publisher<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"MJ"</span><span class="token punctuation">,</span> address<span class="token operator">=</span><span class="token string">"Sangdoro 421"</span><span class="token punctuation">,</span> city<span class="token operator">=</span><span class="token string">"Seoul"</span><span class="token punctuation">,</span> state_province<span class="token operator">=</span><span class="token string">"Seoul"</span><span class="token punctuation">,</span> country<span class="token operator">=</span><span class="token string">"Korea"</span><span class="token punctuation">,</span> website<span class="token operator">=</span><span class="token string">"www.mj.com"</span><span class="token punctuation">)</span>

p1<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#DB에 반영</span>

p2 <span class="token operator">=</span> Publisher<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">"Sim"</span><span class="token punctuation">,</span> address<span class="token operator">=</span><span class="token string">"Pangyo 221"</span><span class="token punctuation">,</span> city<span class="token operator">=</span><span class="token string">"Seongnam"</span><span class="token punctuation">,</span> state_province<span class="token operator">=</span><span class="token string">"Gyeonggi"</span><span class="token punctuation">,</span> country<span class="token operator">=</span><span class="token string">"KOREA"</span><span class="token punctuation">,</span> website<span class="token operator">=</span><span class="token string">"www.sim.com"</span><span class="token punctuation">)</span>

p2<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#DB에 반영</span>
Publisher<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token triple-quoted-string string">"""
&lt;QuerySet [&lt;Publisher: Publisher object (1)&gt;, &lt;Publisher: Publisher object (2)&gt;]&gt;
"""</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">데이터를 입력하기 위해선 우선적으로 추가할 데이터 모델을 가져와야 한다. 위의 코드에서는 이전에 정의한 <code class="code-styler-inline">Publisher</code> 모델의 각 필드 조건에 만족하는 값을 채워 인스턴스를 생성한다. 이때 만들어지는 객체는 모델 객체로 아직 DB에 존재하지는 않는 데이터이다. <span class="red red-bg">만약 DB에 반영하고 싶으면 <code class="code-styler-inline">save()</code>를 실행해야하고 이 경우 장고는 INSERT 쿼리를 실행해 실제 데이터를 DB에 추가한다.</span></p></div><div><p dir="auto"><code class="code-styler-inline">save()</code>를 통해 데이터를 DB에 반영한 이후에는 <code class="code-styler-inline">objects.all()</code>을 통해 DB에 존재하는 모든 데이터를 가져온다. 해당 메서드가 실행되면 장고는  <code class="code-styler-inline">SELECT * FROM Publisher</code> 와 같은 쿼리를 전송한다. </p></div><div><p dir="auto">이때 <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/en/5.0/faq/models/#how-can-i-see-the-raw-sql-queries-django-is-running" rel="noopener" class="external-link" href="https://docs.djangoproject.com/en/5.0/faq/models/#how-can-i-see-the-raw-sql-queries-django-is-running" target="_blank">django.db.connection</a> 객체를 활용하면 실제로 어떤 쿼리가 나가는지 확인해 볼수 있다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> connection <span class="token comment">#settings.py에서 DEBUG 설정 값이 True여야 한다.</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>connection<span class="token punctuation">.</span>queries<span class="token punctuation">)</span> <span class="token comment">#현재까지 전송한 쿼리가 전부 기록된다.</span>

<span class="token triple-quoted-string string">"""
[{'sql': 'INSERT INTO "books_publisher" ("name", "address", "city", "state_province", "country", "website") VALUES (\'MJ\', \'Sangdoro 421\', \'Seoul\', \'Seoul\', \'Korea\', \'www.mj.com\') RETURNING "books_publisher"."id"', 'time': '0.002'}, {'sql': 'INSERT INTO "books_publisher" ("name", "address", "city", "state_province", "country", "website") VALUES (\'Sim\', \'Pangyo 221\', \'Seongnam\', \'Gyeonggi\', \'KOREA\', \'www.sim.com\') RETURNING "books_publisher"."id"', 'time': '0.000'}, {'sql': 'SELECT "books_publisher"."id", "books_publisher"."name", "books_publisher"."address", "books_publisher"."city", "books_publisher"."state_province", "books_publisher"."country", "books_publisher"."website" FROM "books_publisher" LIMIT 21', 'time': '0.000'}]
"""</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">실제로 <code class="code-styler-inline">save()</code>를 실행할 때마다 <code class="code-styler-inline">INSERT</code>가 실행되고 <code class="code-styler-inline">all()</code>을 실행할 때는 <code class="code-styler-inline">SELECT</code>가 확인되는 것을 확인 할 수 있다.</p></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="`_meta`와 모델을 파이써닉하게 사용하기" dir="auto" class="heading" id="`_meta`와_모델을_파이써닉하게_사용하기"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><code class="code-styler-inline">_meta</code>와 모델을 파이써닉하게 사용하기</h3><div class="heading-children"><div><p dir="auto"><code class="code-styler-inline">__str__()</code> 매직 메서드를 활용하면 모델 객체의 표현을 아름답게 수정할 수 있다. 이를 활용해 모델 객체를 출력하면 <code class="code-styler-inline">id</code>값을 제외한 속성 값이 아름답게 출력되게 변경해보자. </p></div><div><p dir="auto">모델 내부에 존재하는 모든 속성 값에 접근 하기 위해서는 <code class="code-styler-inline">_meta</code> 를 활용해야 한다. <code class="code-styler-inline">_meta</code>는 모델 객체의 모든 속성을 갖고 있는 객체로 이를 통해 모델에 존재하는 모든 속성에 접근할 수 있다. 공식 문서에서는 다음과 같이 설명한다.</p></div><div><blockquote dir="auto">
<p dir="auto">The model&nbsp;<code class="code-styler-inline">_meta</code>&nbsp;API is at the core of the Django ORM. It enables other parts of the system such as lookups, queries, forms, and the admin to understand the capabilities of each model.</p>
</blockquote></div><div><p dir="auto">요약하면 <code class="code-styler-inline">_meta</code>는 모델에 대한 모든 정보를 갖고 있는 속성으로 쿼리나 폼등이 모델의 형태를 파악하기 위해 사용한다는 뜻이다. <code class="code-styler-inline">_meta</code> 속성과 매직 메서드를 조합하면 모델 객체 내부에 존재하는 값을 내가 원하는 형태로 변환해 확인하는 것이 가능하다. 아래 예시를 보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">class</span> <span class="token class-name">Author</span><span class="token punctuation">(</span>models<span class="token punctuation">.</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
    first_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">30</span><span class="token punctuation">)</span>
    last_name <span class="token operator">=</span> models<span class="token punctuation">.</span>CharField<span class="token punctuation">(</span>max_length<span class="token operator">=</span><span class="token number">40</span><span class="token punctuation">)</span>
    email <span class="token operator">=</span> models<span class="token punctuation">.</span>EmailField<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">for</span> field <span class="token keyword">in</span> self<span class="token punctuation">.</span>_meta<span class="token punctuation">.</span>get_fields<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                res<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>field<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">getattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> field<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
            <span class="token keyword">except</span> AttributeError<span class="token punctuation">:</span>
                <span class="token keyword">continue</span>

        <span class="token keyword">return</span> <span class="token string">" "</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span>res<span class="token punctuation">)</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><code class="code-styler-inline">_meta.get_fields()</code> 메서드를 통해 모든 컬럼을 접근하고 이를 활용해 해당 객체의 모든 값을 추출한다. 이때 각 데이터를 :으로 구분해 출력 해준다. 이 경우 <code class="code-styler-inline">&lt;Author: id:None first_name:kim last_name:MinJi email:newjeans@new.com&gt;</code> 와 같은 출력 값을 획득할 수 있다.</p></div><div><div data-callout-metadata="" data-callout-fold="" data-callout="그냥-찍는게-더-이쁜데요?" class="callout" dir="auto"><div class="callout-title" dir="auto"><div class="callout-icon" dir="auto"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner" dir="auto">그냥 찍는게 더 이쁜데요?</div></div><div class="callout-content" dir="auto">
<p dir="auto">맞다. 그냥 찍는게 더 예쁘다. 사실 여기서 설명하고 싶은 것은 <strong>매직 메서드를 오버라이딩 함으로써 모델 객체를 내가 일반 클래스 처럼 파이써닉하게 다루는 것이 가능하다는 점이다.</strong></p>
</div></div></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="데이터 삽입" dir="auto" class="heading" id="데이터_삽입"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>데이터 삽입</h3><div class="heading-children"><div><p dir="auto">이제 장고에서 데이터를 집어넣고 업데이트 하는 작업을 수행해보자. 장고에선 간단하게 다음과 같은 방식으로 데이터를 삽입하는 것이 가능하다. 뷰를 직접 호출해서 작업 하는건 번잡 하므로 장고 쉘에서 간단하게 작업해보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token operator">&gt;&gt;</span> python3 manage<span class="token punctuation">.</span>py shell

<span class="token keyword">from</span> books<span class="token punctuation">.</span>models <span class="token keyword">import</span> Author
a <span class="token operator">=</span> Author<span class="token punctuation">(</span>first_name <span class="token operator">=</span> <span class="token string">"Kim"</span><span class="token punctuation">,</span> last_name <span class="token operator">=</span> <span class="token string">"MinJi"</span><span class="token punctuation">,</span> email <span class="token operator">=</span> <span class="token string">"newjeans@new.com"</span><span class="token punctuation">)</span>
a<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">앞서 말했듯이 <code class="code-styler-inline">save()</code>를 하는 순간 모델 객체가 DB에 반영 된다. 해당 메서드는 처음에 모델 객체를 만들어 호출할 때는 <code class="code-styler-inline">INSERT</code> 쿼리를 전송하고 이후 모델 객체의 속성을 수정하면 <code class="code-styler-inline">UPDATE</code> 쿼리를 전송한다. 실제로 그렇게 동작하는지 아래 코드를 통해 확인 해보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">import</span> os

os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>setdefault<span class="token punctuation">(</span><span class="token string">"DJANGO_SETTINGS_MODULE"</span><span class="token punctuation">,</span> <span class="token string">"first_django.settings"</span><span class="token punctuation">)</span>

<span class="token keyword">import</span> django

django<span class="token punctuation">.</span>setup<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># Create your tests here.</span>
<span class="token keyword">from</span> django<span class="token punctuation">.</span>db <span class="token keyword">import</span> connection
<span class="token keyword">from</span> django<span class="token punctuation">.</span>http <span class="token keyword">import</span> JsonResponse
<span class="token keyword">from</span> books<span class="token punctuation">.</span>models <span class="token keyword">import</span> Author


<span class="token keyword">def</span> <span class="token function">save_model_instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># 데이터베이스 쿼리 리스트 초기화</span>

    <span class="token comment"># 모델 인스턴스 생성 및 저장</span>
    instance <span class="token operator">=</span> Author<span class="token punctuation">(</span>first_name<span class="token operator">=</span><span class="token string">"kim"</span><span class="token punctuation">,</span> last_name<span class="token operator">=</span><span class="token string">"hani2"</span><span class="token punctuation">,</span> email<span class="token operator">=</span><span class="token string">"newjeans@new.com"</span><span class="token punctuation">)</span>
    instance<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
	instance<span class="token punctuation">.</span>first_name <span class="token operator">=</span> <span class="token string">"Lee"</span>
	instance<span class="token punctuation">.</span>save<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># 실행된 쿼리 출력</span>
    <span class="token keyword">for</span> query <span class="token keyword">in</span> connection<span class="token punctuation">.</span>queries<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span>

    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"status"</span><span class="token punctuation">:</span> <span class="token string">"success"</span><span class="token punctuation">}</span><span class="token punctuation">)</span>


<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    save_model_instance<span class="token punctuation">(</span><span class="token punctuation">)</span>

</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">해당 코드에서 확인할 부분은 ORM 처리 말고도 다른 부분이 존재한다. 3번과 7번 줄을 확인 해보자. <span class="red red-bg">일반적인 파이썬 스크립트로 장고를 사용하려면 장고 환경 설정을 스크립트 내부에서 진행해야 한다. 3번줄은 장고 환경 변수를 설정하고 7번 줄에서 해당 변수를 기반으로 장고 설정을 진행한후 설정된 값을 토대로 장고 모듈들을 임포팅 한다. </span></p></div><div><p dir="auto">이제 23번 줄을 확인해보자. 커넥션 객체에는 현재까지 전송된 쿼리 정보가 남아있고 우리는 이를 순회 함으로써 어떠한 쿼리가 전송 됐는지를 직접 확인해 볼 수 있다. 처음의 <code class="code-styler-inline">save()</code>를 실행 했을 때는 아래와 같은 쿼리가 전송된다.</p></div><div><pre dir="auto" class="language-sql" tabindex="0"><code class="language-sql is-loaded"><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token string">"books_author"</span> <span class="token punctuation">(</span><span class="token string">"first_name"</span><span class="token punctuation">,</span> <span class="token string">"last_name"</span><span class="token punctuation">,</span> <span class="token string">"email"</span><span class="token punctuation">)</span> <span class="token keyword">VALUES</span> <span class="token punctuation">(</span><span class="token string">"kim"</span><span class="token punctuation">,</span> <span class="token string">"hani2"</span><span class="token punctuation">,</span> <span class="token string">"newjeans@new.com"</span><span class="token punctuation">)</span> 

<span class="token keyword">UPDATE</span> <span class="token string">"books_author"</span> <span class="token keyword">SET</span> <span class="token string">"first_name"</span> <span class="token operator">=</span> <span class="token string">'Lee'</span><span class="token punctuation">,</span> <span class="token string">"last_name"</span> <span class="token operator">=</span> <span class="token string">'hani2'</span><span class="token punctuation">,</span> <span class="token string">"email"</span> <span class="token operator">=</span> <span class="token string">'newjeans@new.com'</span> <span class="token keyword">WHERE</span> <span class="token string">"books_author"</span><span class="token punctuation">.</span><span class="token string">"id"</span> <span class="token operator">=</span> <span class="token number">5</span>

</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><strong>장고 ORM은 처음 객체를 저장할 때는 <code class="code-styler-inline">INSERT</code> 를 사용하고 이후 객체의 값을 수정할 때는 <code class="code-styler-inline">UPDATE</code>를 활용 한다는 것을 확인 할 수 있다.</strong>  문제점은 쿼리문을 살펴보면 수정한 값 뿐만 아니라 모든 필드의 값을 덮어 쓰고 있다는 것이다. 이는 DB의 큰 부하를 불러 일으킬 수 있다.  </p></div><div><div data-callout-metadata="" data-callout-fold="" data-callout="orm의-덫" class="callout" dir="auto"><div class="callout-title" dir="auto"><div class="callout-icon" dir="auto"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner" dir="auto">Orm의 덫</div></div><div class="callout-content" dir="auto">
<p dir="auto">이러한 현상이 ORM으로 인해 발생하는 대표적인 문제이다.<br>
ORM이 쿼리를 추상화해 개발자가 쿼리를 직접 확인하지 않아 이런 상황이 발생한다. 따라서 <strong>개발자는 ORM을 사용 하더라도 어떤 형태의 쿼리가 전송 되는지 모니터링하고 체킹할 필요가 존재</strong>한다.</p>
</div></div></div><div class="heading-wrapper"><h4 data-heading="save() 개선하기" dir="auto" class="heading" id="save()_개선하기"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>save() 개선하기</h4><div class="heading-children"><div><p dir="auto">save()를 개선하는 방법은 간단하다. 수정이 발생한 필드를 <code class="code-styler-inline">update_fields</code>라는 매개변수에 전달해주면 된다. 해당 변수를 전달해주면 전달한 컬럼만 업데이트를 진행한다. </p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded">user<span class="token punctuation">.</span>save<span class="token punctuation">(</span>update_fields<span class="token operator">=</span><span class="token punctuation">[</span><span class="token string">"first_name"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">#업데이트가 발생한 컬럼만 업데이트를 진행한다.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> UPDATE <span class="token string">"books_author"</span> SET <span class="token string">"first_name"</span> <span class="token operator">=</span> <span class="token string">'Lee'</span><span class="token punctuation">,</span> WHERE <span class="token string">"books_author"</span><span class="token punctuation">.</span><span class="token string">"id"</span> <span class="token operator">=</span> <span class="token number">5</span>

</code><button class="copy-code-button">Copy</button></pre></div><div><hr dir="auto"></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="쿼리셋이란" dir="auto" class="heading" id="쿼리셋이란"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>쿼리셋이란</h3><div class="heading-children"><div><p dir="auto">이제 ORM의 가장 기본적인 동작인 조회를 실행하는 방법을 확인해보자. 장고 ORM에서 조회를 진행하는 방법은 아래와 같다. </p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded">authors <span class="token operator">=</span> Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> SELECT <span class="token string">"books_author"</span><span class="token punctuation">.</span><span class="token string">"id"</span><span class="token punctuation">,</span> <span class="token string">"books_author"</span><span class="token punctuation">.</span><span class="token string">"first_name"</span><span class="token punctuation">,</span> <span class="token string">"books_author"</span><span class="token punctuation">.</span><span class="token string">"last_name"</span><span class="token punctuation">,</span> <span class="token string">"books_author"</span><span class="token punctuation">.</span><span class="token string">"email"</span> FROM <span class="token string">"books_author"</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">몇 가지를 살펴보자. 우선적으로 <code class="code-styler-inline">objects</code>라는 속성을 확인할 필요가 있다. 이는 <strong>ORM 사용을 위한 매니저 객체로 모든 모델에 존재하고 객체의 조회 수정등을 처리하는 역할을 수행한다.</strong> (추후 자세히)</p></div><div><p dir="auto"><code class="code-styler-inline">all()</code> 을 활용하면 모든 컬럼의 데이터를 선택해 반환하는데 실제 전송되는 쿼리 문을 확인하면 <code class="code-styler-inline">*</code>이 아닌 전체 컬럼 명이 명시돼 있는 것을 확인 할 수 있다. <strong>이는 파이썬의 Zen에 존재하는 "명시적인 것이 암묵적인 것 보다 낫다" 라는 철학을 준수하고 있다.</strong></p></div><div><p dir="auto">반환되는 값은 <code class="code-styler-inline">QuerySet</code>으로 쿼리 셋은 다음과 같은 특징을 갖는다.</p></div><div class="heading-wrapper"><h4 data-heading="쿼리 셋은 lazy-loading한다" dir="auto" class="heading" id="쿼리_셋은_lazy-loading한다"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>쿼리 셋은 lazy-loading한다</h4><div class="heading-children"><div><p dir="auto">쿼리 셋은 실제 DB와의 인터랙션 없이 생성할 수 있다. 아래의 코드를 확인 해보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded">authors <span class="token operator">=</span> Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment"># print(authors) 접근을 해야 쿼리가 전송된다.</span>
<span class="token keyword">for</span> query <span class="token keyword">in</span> connection<span class="token punctuation">.</span>queries<span class="token punctuation">:</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span>query<span class="token punctuation">)</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">print 문을 실행하지 않고 전송된 쿼리를 확인해보면 어떠한 쿼리도 전송되지 않은 것을 확인할 수 있다. 이는 <span class="red red-bg">lazy-loading이라는 특성 때문인데 장고는 쿼리셋 객체에 접근하는 순간 쿼리를 전송하고 DB에서 데이터를 가져온다.</span>  print 구문을 실행한 후 쿼리를 확인해보면 쿼리가 전송된 로그를 확인해 볼 수 있다.</p></div><div><p dir="auto"><strong>장고는 이러한 방법으로 메모리 낭비와 DB 오버헤드를 줄이는데, 이 방법이 만능인 것은 아니다. 이는 N+1 쿼리 오류라는 문제를 발생 시키기도 한다.</strong> <a data-tooltip-position="top" aria-label="https://velog.io/@kylexid/Django-N1-%EC%BF%BC%EB%A6%AC-%EB%AC%B8%EC%A0%9C-mkyveu3u" rel="noopener" class="external-link" href="https://velog.io/@kylexid/Django-N1-%EC%BF%BC%EB%A6%AC-%EB%AC%B8%EC%A0%9C-mkyveu3u" target="_blank">N+1 문제</a></p></div></div></div><div class="heading-wrapper"><h4 data-heading="N + 1 문제 추가 예정" dir="auto" class="heading" id="N_+_1_문제_추가_예정"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>N + 1 문제 추가 예정</h4><div class="heading-children"></div></div><div class="heading-wrapper"><h4 data-heading="쿼리 셋은 리스트와 거의 흡사하다" dir="auto" class="heading" id="쿼리_셋은_리스트와_거의_흡사하다"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>쿼리 셋은 리스트와 거의 흡사하다</h4><div class="heading-children"><div><p dir="auto">쿼리셋은 len, repr, list와 같은 메서드를 제공하고 심지어 인덱싱과 슬라이싱과 같은 기능도 제공한다. 아래 코드를 보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded">authors <span class="token operator">=</span> Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>authors<span class="token punctuation">)</span><span class="token punctuation">,</span> authors<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> authors<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> authors<span class="token punctuation">:</span>
	<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Result Exists!"</span><span class="token punctuation">)</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">쿼리 셋은 위의 연산을 전부 제공한다. len과 인덱싱은 쿼리를 실행하지만, 슬라이싱의 경우 step 파라미터를 넘기지 않으면 쿼리가 곧장 전송되지 않는다.<br>
슬라이싱을 사용하면 쿼리의 오버헤드를 줄일수 있다는 장점이 존재한다. <strong>만약 <code class="code-styler-inline">authors[0:2]</code> 와 같은 슬라이싱이 존재한다고 하면 해당 객체에 접근할 때 장고는 <code class="code-styler-inline">SELECT * FROM AUTHOR OFFSET 0 LIMIT 2</code>와 같은 쿼리를 전송한다.</strong></p></div><div><p dir="auto">추가적으로 쿼리 셋은 <code class="code-styler-inline">bool()</code>  메서드도 구현돼 있어 만약 결과가 존재할 경우 True를 반환한다. <strong>리스트와 몹시 흡사하지만 실제 리스트는 아니기에  정말 리스트로써 활용하기 위해서는 형변환이 필요하다.</strong></p></div></div></div><div class="heading-wrapper"><h4 data-heading="Serializer의 필요성" dir="auto" class="heading" id="Serializer의_필요성"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Serializer의 필요성</h4><div class="heading-children"><div><p dir="auto">쿼리셋은 딕셔너리도 리스트도 아니기 때문에 JSON 형태의 응답이나 일반적인 문자열로 변환하기 위해서는 별도의 Serializer가 필수적이다. 아래의 코드를 보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">def</span> <span class="token function">save_model_instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    authors <span class="token operator">=</span> Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span>authors<span class="token punctuation">)</span> <span class="token comment">#error!</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> TypeError<span class="token punctuation">:</span> In order to allow non<span class="token operator">-</span><span class="token builtin">dict</span> objects to be serialized <span class="token builtin">set</span> the safe parameter to <span class="token boolean">False</span><span class="token punctuation">.</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">이는 쿼리셋 객체가 JSON 형식의 응답으로 변환이 불가능하기 때문에 발생하는 오류로 쿼리셋 객체를 JSON 형식으로 반환하기 위해서는 이를 전송가능한 딕셔너리 형태나 별도의 문자열로 변환해야 한다.<br>
다행스럽게도 쿼리셋의 데이터를 그냥 전송하는 것이라면 장고에서 직렬화를 제공한다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>serializers<span class="token punctuation">.</span>json <span class="token keyword">import</span> DjangoJSONEncoder
<span class="token keyword">from</span> django<span class="token punctuation">.</span>core<span class="token punctuation">.</span>serializers <span class="token keyword">import</span> serialize

<span class="token keyword">def</span> <span class="token function">save_model_instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    authors <span class="token operator">=</span> Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    res <span class="token operator">=</span> serialize<span class="token punctuation">(</span><span class="token string">"json"</span><span class="token punctuation">,</span> queryset<span class="token operator">=</span>authors<span class="token punctuation">,</span> cls<span class="token operator">=</span>DjangoJSONEncoder<span class="token punctuation">)</span>
    <span class="token keyword">return</span> JsonResponse<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"res"</span><span class="token punctuation">:</span> res<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">문제는 장고에서 기본 제공하는 인코더가 아닌 다른 형태로 직렬화를 하고 싶을 경우 직접 시리얼라이저를 구현해야 하는데 이게 생각보다 번잡한 작업이 된다. (DRF는 이러한 부분에서 불편을 느껴 탄생했다) 이 부분은 추후 더 자세히 설명한다.</p></div><div><hr dir="auto"></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="데이터 선택하기" dir="auto" class="heading" id="데이터_선택하기"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>데이터 선택하기</h3><div class="heading-children"><div><p dir="auto">위에서 간단히 본 <code class="code-styler-inline">all()</code> 말고도 다양한 방법으로 데이터를 선택할 수 있다. 아래에서는 크게 <code class="code-styler-inline">get, filter</code>를 살펴본다. </p></div><div><ul dir="auto">
<li data-line="0" dir="auto">
<p dir="auto"><strong>get()</strong><br>
get은 조건에 해당하는 하나의 행을 반환한다. 만약 여러 개의 행이 존재 하거나 결과 값이 존재하지 않을 경우 예외가 발생한다. <strong>get의 반환 값은 쿼리셋이 아닌 모델 객체이다.</strong></p>
</li>
<li data-line="3" dir="auto">
<p dir="auto"><strong>filter()</strong><br>
<strong>filter는 조건에 해당하는 모든 행을 쿼리셋으로 반환한다.</strong> 또한 결과 값이 존재하지 않을 경우 빈 쿼리셋을 반환한다. </p>
</li>
</ul></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded">author <span class="token operator">=</span> Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
author2 <span class="token operator">=</span> Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token operator">&gt;&gt;</span><span class="token punctuation">{</span><span class="token string">'sql'</span><span class="token punctuation">:</span> <span class="token string">'SELECT "books_author"."id", "books_author"."first_name", "books_author"."last_name", "books_author"."email" FROM "books_author" WHERE "books_author"."id" = 1 LIMIT 21'</span><span class="token punctuation">,</span> <span class="token string">'time'</span><span class="token punctuation">:</span> <span class="token string">'0.000'</span><span class="token punctuation">}</span>

<span class="token operator">&gt;&gt;</span><span class="token punctuation">{</span><span class="token string">'sql'</span><span class="token punctuation">:</span> <span class="token string">'SELECT "books_author"."id", "books_author"."first_name", "books_author"."last_name", "books_author"."email" FROM "books_author" WHERE "books_author"."id" = 2 LIMIT 21'</span><span class="token punctuation">,</span> <span class="token string">'time'</span><span class="token punctuation">:</span> <span class="token string">'0.000'</span><span class="token punctuation">}</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><strong>어떤 메소드를 사용하더라도 전송하는 쿼리의 내용 자체는 흡사하다.</strong> 따라서 성능 보다는 안정성을 고려에 두고 해당 메서드를 활용하는 것이 적절하므로 유니크 키를 사용하지 않고 조회를 수행하는 경우 <code class="code-styler-inline">filter</code>를 사용 하도록 하자.</p></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="데이터 수정과 삭제" dir="auto" class="heading" id="데이터_수정과_삭제"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>데이터 수정과 삭제</h3><div class="heading-children"><div><p dir="auto">데이터를 수정하는 방법은 앞서 말한 <code class="code-styler-inline">save()</code>를 사용하는 방법도 존재하지만 이는 단일한 객체만 수정이 가능하다는 단점이 존재했다.<br>
<code class="code-styler-inline">update()</code> 메서드를 활용하면 <strong>실제 SQL에서 제공하는 업데이트 구문을 사용해 여러 개의 행을 동시에 업데이트 하거나 특정 컬럼의 값만을 수정하는 것이 가능</strong>하다. </p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded">author <span class="token operator">=</span> Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">filter</span><span class="token punctuation">(</span>email<span class="token operator">=</span><span class="token string">"newjeans@new.com"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>update<span class="token punctuation">(</span>
	email<span class="token operator">=</span><span class="token string">"mjlover@mj.com"</span>
<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span> <span class="token punctuation">{</span><span class="token string">'sql'</span><span class="token punctuation">:</span> <span class="token string">'UPDATE "books_author" SET "email" = \'mjlover@mj.com\' WHERE "books_author"."email" = \'newjeans@new.com\''</span><span class="token punctuation">,</span> <span class="token string">'time'</span><span class="token punctuation">:</span> <span class="token string">'0.001'</span><span class="token punctuation">}</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">행을 삭제하는 방법으로는 <code class="code-styler-inline">delete()</code> 메서드를 활용하면 된다. 이는 SQL의 DELETE와 동일하게 동작하며 아래와 같이 사용할 수 있다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded">author <span class="token operator">=</span> Author<span class="token punctuation">.</span>objects<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token builtin">id</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>
author<span class="token punctuation">.</span>delete<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">확인해보면 실제로 테이블에 존재하는 데이터가 삭제 된것을 확인할 수 있다. 테이블 내부의 모든 데이터를 제거히기 위해서는 <code class="code-styler-inline">Model.objects.all().delete()</code>와 같이 all을 추가적으로 작성해야 하는데 이는 오류를 방지하기 위함이다.</p></div><div><p dir="auto"><code class="code-styler-inline">delete()</code>의 실제 전송 쿼리를 한번 살펴보자. 확인해보면 단순한 삭제 명령만 전송되는 것이 아니라 복수개의 명령이 하나의 트랜젝션으로 묶여서 전송되는 것을 확인할 수 있다. <span class="red red-bg">이는 기존의 모델에서 설정해 둔 외래키의 cascading 삭제를 반영하기 위함으로 관계가 복잡한 객체를 제거할 경우 이런식으로 트랜젝션이 DB에 전송된다. </span></p></div><div><pre dir="auto" class="language-sql" tabindex="0"><code class="language-sql is-loaded"><span class="token keyword">BEGIN</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token string">"books_book_authors"</span> <span class="token keyword">WHERE</span> <span class="token string">"books_book_authors"</span><span class="token punctuation">.</span><span class="token string">"author_id"</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> <span class="token string">"books_author"</span> <span class="token keyword">WHERE</span> <span class="token string">"books_author"</span><span class="token punctuation">.</span><span class="token string">"id"</span> <span class="token operator">IN</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token keyword">COMMIT</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><div data-callout-metadata="" data-callout-fold="" data-callout="삭제는-신중히" class="callout" dir="auto"><div class="callout-title" dir="auto"><div class="callout-icon" dir="auto"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-pencil"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"></path><path d="m15 5 4 4"></path></svg></div><div class="callout-title-inner" dir="auto">삭제는 신중히</div></div><div class="callout-content" dir="auto">
<p dir="auto"><strong>삭제는 보통 단순한 트랜젝션으로 안끝나는 경우가 많다. 오버헤드가 큰 작업이므로 신중하게 진행할 필요가 있다.</strong></p>
</div></div></div><div class="mod-footer"></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="django/장고-모델-(2).html#장고 모델 (2)"><div class="tree-item-contents heading-link" heading-name="장고 모델 (2)"><span class="tree-item-title">장고 모델 (2)</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="django/장고-모델-(2).html#출처"><div class="tree-item-contents heading-link" heading-name="출처"><span class="tree-item-title">출처</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="django/장고-모델-(2).html#개요"><div class="tree-item-contents heading-link" heading-name="개요"><span class="tree-item-title">개요</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="django/장고-모델-(2).html#데이터_엑세스"><div class="tree-item-contents heading-link" heading-name="데이터 엑세스"><span class="tree-item-title">데이터 엑세스</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="django/장고-모델-(2).html#`_meta`와_모델을_파이써닉하게_사용하기"><div class="tree-item-contents heading-link" heading-name="`_meta`와 모델을 파이써닉하게 사용하기"><span class="tree-item-title"><code class="code-styler-inline">_meta</code>와 모델을 파이써닉하게 사용하기</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="django/장고-모델-(2).html#데이터_삽입"><div class="tree-item-contents heading-link" heading-name="데이터 삽입"><span class="tree-item-title">데이터 삽입</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="django/장고-모델-(2).html#save()_개선하기"><div class="tree-item-contents heading-link" heading-name="save() 개선하기"><span class="tree-item-title">save() 개선하기</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="django/장고-모델-(2).html#쿼리셋이란"><div class="tree-item-contents heading-link" heading-name="쿼리셋이란"><span class="tree-item-title">쿼리셋이란</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="django/장고-모델-(2).html#쿼리_셋은_lazy-loading한다"><div class="tree-item-contents heading-link" heading-name="쿼리 셋은 lazy-loading한다"><span class="tree-item-title">쿼리 셋은 lazy-loading한다</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="django/장고-모델-(2).html#N_+_1_문제_추가_예정"><div class="tree-item-contents heading-link" heading-name="N + 1 문제 추가 예정"><span class="tree-item-title">N + 1 문제 추가 예정</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="django/장고-모델-(2).html#쿼리_셋은_리스트와_거의_흡사하다"><div class="tree-item-contents heading-link" heading-name="쿼리 셋은 리스트와 거의 흡사하다"><span class="tree-item-title">쿼리 셋은 리스트와 거의 흡사하다</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="django/장고-모델-(2).html#Serializer의_필요성"><div class="tree-item-contents heading-link" heading-name="Serializer의 필요성"><span class="tree-item-title">Serializer의 필요성</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="django/장고-모델-(2).html#데이터_선택하기"><div class="tree-item-contents heading-link" heading-name="데이터 선택하기"><span class="tree-item-title">데이터 선택하기</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="django/장고-모델-(2).html#데이터_수정과_삭제"><div class="tree-item-contents heading-link" heading-name="데이터 수정과 삭제"><span class="tree-item-title">데이터 수정과 삭제</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>