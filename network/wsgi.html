<!DOCTYPE html> <html><head>
		<title>WSGI</title>
		<base href="../">
		<meta id="root-path" root-path="../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="my_study - WSGI">
		<meta property="og:title" content="WSGI">
		<meta property="og:description" content="my_study - WSGI">
		<meta property="og:type" content="website">
		<meta property="og:url" content="network/wsgi.html">
		<meta property="og:image" content="https://obs3dian.s3.ap-northeast-2.amazonaws.com/WSGI%20/%20Pasted%20image%2020240514142452.png">
		<meta property="og:site_name" content="my_study">
		<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="preload" href="lib/styles/other-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/other-plugins.css"></noscript><link rel="stylesheet" href="lib/styles/theme.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/supported-plugins.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript><link rel="preload" href="lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/snippets.css"></noscript></head><body class="publish css-settings-manager theme-light show-inline-title show-ribbon code-styler code-styler-style-inline code-styler-gutter-highlight"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles">mjx-mfrac{display:inline-block;text-align:left}mjx-frac{display:inline-block;vertical-align:.17em;padding:0 .22em}mjx-frac[type="d"]{vertical-align:.04em}mjx-frac[delims]{padding:0 .1em}mjx-frac[atop]{padding:0 .12em}mjx-frac[atop][delims]{padding:0}mjx-dtable{display:inline-table;width:100%}mjx-dtable>*{font-size:2000%}mjx-dbox{display:block;font-size:5%}mjx-num{display:block;text-align:center}mjx-den{display:block;text-align:center}mjx-mfrac[bevelled]>mjx-num{display:inline-block}mjx-mfrac[bevelled]>mjx-den{display:inline-block}mjx-den[align=right],mjx-num[align=right]{text-align:right}mjx-den[align=left],mjx-num[align=left]{text-align:left}mjx-nstrut{display:inline-block;height:.054em;width:0;vertical-align:-.054em}mjx-nstrut[type="d"]{height:.217em;vertical-align:-.217em}mjx-dstrut{display:inline-block;height:.505em;width:0}mjx-dstrut[type="d"]{height:.726em}mjx-line{display:block;box-sizing:border-box;min-height:1px;height:.06em;border-top:.06em solid;margin:.06em -.1em;overflow:hidden}mjx-line[type="d"]{margin:.18em -.1em}mjx-mrow{display:inline-block;text-align:left}mjx-mspace{display:inline-block;text-align:left}mjx-c.mjx-c30::before{padding:.666em .5em .022em 0;content:"0"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c34::before{padding:.677em .5em 0 0;content:"4"}mjx-c.mjx-c37::before{padding:.676em .5em .022em 0;content:"7"}mjx-c.mjx-c33::before{padding:.665em .5em .022em 0;content:"3"}mjx-c.mjx-c36::before{padding:.666em .5em .022em 0;content:"6"}mjx-c.mjx-c1D463.TEX-I::before{padding:.443em .485em .011em 0;content:"v"}mjx-c.mjx-c1D45F.TEX-I::before{padding:.442em .451em .011em 0;content:"r"}mjx-c.mjx-c1D44E.TEX-I::before{padding:.441em .529em .01em 0;content:"a"}mjx-c.mjx-c1D454.TEX-I::before{padding:.442em .477em .205em 0;content:"g"}mjx-c.mjx-c1D460.TEX-I::before{padding:.442em .469em .01em 0;content:"s"}mjx-c.mjx-c1D45C.TEX-I::before{padding:.441em .485em .011em 0;content:"o"}mjx-c.mjx-c1D45B.TEX-I::before{padding:.442em .6em .011em 0;content:"n"}mjx-c.mjx-c1D447.TEX-I::before{padding:.677em .704em 0 0;content:"T"}mjx-c.mjx-c35::before{padding:.666em .5em .022em 0;content:"5"}mjx-c.mjx-c2E::before{padding:.12em .278em 0 0;content:"."}mjx-msub{display:inline-block;text-align:left}mjx-c.mjx-c1D436.TEX-I::before{padding:.705em .76em .022em 0;content:"C"}mjx-c.mjx-c1D434.TEX-I::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c1D449.TEX-I::before{padding:.683em .769em .022em 0;content:"V"}mjx-c.mjx-c1D445.TEX-I::before{padding:.683em .759em .021em 0;content:"R"}mjx-c.mjx-c1D443.TEX-I::before{padding:.683em .751em 0 0;content:"P"}mjx-c.mjx-c1D456.TEX-I::before{padding:.661em .345em .011em 0;content:"i"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block;text-align:left}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-mi{display:inline-block;text-align:left}mjx-mn{display:inline-block;text-align:left}mjx-msup{display:inline-block;text-align:left}mjx-texatom{display:inline-block;text-align:left}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c1D45D.TEX-I::before{padding:.442em .503em .194em 0;content:"p"}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-c.mjx-c2C::before{padding:.121em .278em .194em 0;content:","}mjx-c.mjx-c1D45E.TEX-I::before{padding:.442em .46em .194em 0;content:"q"}mjx-c.mjx-c1D452.TEX-I::before{padding:.442em .466em .011em 0;content:"e"}mjx-c.mjx-c1D451.TEX-I::before{padding:.694em .52em .01em 0;content:"d"}mjx-c.mjx-c1D441.TEX-I::before{padding:.683em .888em 0 0;content:"N"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c1D45A.TEX-I::before{padding:.442em .878em .011em 0;content:"m"}mjx-c.mjx-c1D450.TEX-I::before{padding:.442em .433em .011em 0;content:"c"}mjx-c.mjx-c6D::before{padding:.442em .833em 0 0;content:"m"}mjx-c.mjx-c6F::before{padding:.448em .5em .01em 0;content:"o"}mjx-c.mjx-c64::before{padding:.694em .556em .011em 0;content:"d"}mjx-c.mjx-c1D458.TEX-I::before{padding:.694em .521em .011em 0;content:"k"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}</style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="WSGI"><p dir="auto">WSGI</p></h1><div class="heading-wrapper"><h3 data-heading="출처" dir="auto" class="heading" id="출처"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>출처</h3><div class="heading-children"><div><ul dir="auto">
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="https://peps.python.org/pep-0333/" rel="noopener" class="external-link" href="https://peps.python.org/pep-0333/" target="_blank">pep333</a></li>
<li data-line="1" dir="auto"><a data-tooltip-position="top" aria-label="https://stackoverflow.com/questions/219110/how-python-web-frameworks-wsgi-and-cgi-fit-together" rel="noopener" class="external-link" href="https://stackoverflow.com/questions/219110/how-python-web-frameworks-wsgi-and-cgi-fit-together" target="_blank">WSGI VS CGI</a></li>
<li data-line="2" dir="auto"><a data-tooltip-position="top" aria-label="https://devocean.sk.com/experts/techBoardDetail.do?ID=165282&amp;boardType=experts&amp;page=&amp;searchData=&amp;subIndex=&amp;idList=#none" rel="noopener" class="external-link" href="https://devocean.sk.com/experts/techBoardDetail.do?ID=165282&amp;boardType=experts&amp;page=&amp;searchData=&amp;subIndex=&amp;idList=#none" target="_blank">WSGI 뜯어보기</a></li>
<li data-line="3" dir="auto"><a data-tooltip-position="top" aria-label="https://devocean.sk.com/search/techBoardDetail.do?ID=165337&amp;boardType=&amp;query=wsgi&amp;searchData=&amp;page=&amp;subIndex=&amp;idList=" rel="noopener" class="external-link" href="https://devocean.sk.com/search/techBoardDetail.do?ID=165337&amp;boardType=&amp;query=wsgi&amp;searchData=&amp;page=&amp;subIndex=&amp;idList=" target="_blank">WSGI 뜯어보기2</a></li>
</ul></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="개요" dir="auto" class="heading" id="개요"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>개요</h3><div class="heading-children"><div><ul dir="auto">
<li data-line="0" dir="auto"><a data-href="#WSGI란" href="#WSGI란" class="internal-link" target="_self" rel="noopener">WSGI란</a></li>
<li data-line="1" dir="auto"><a data-href="#WSGI의 구조" href="#WSGI의_구조" class="internal-link" target="_self" rel="noopener">WSGI의 구조</a></li>
<li data-line="2" dir="auto"><a data-href="#WSGI 정리" href="#WSGI_정리" class="internal-link" target="_self" rel="noopener">WSGI 정리</a></li>
<li data-line="3" dir="auto"><a data-href="#WSGI의 규칙들" href="#WSGI의_규칙들" class="internal-link" target="_self" rel="noopener">WSGI의 규칙들</a></li>
<li data-line="4" dir="auto"><a data-href="#WSGI 뜯어보기" href="#WSGI_뜯어보기" class="internal-link" target="_self" rel="noopener">WSGI 뜯어보기</a></li>
<li data-line="5" dir="auto"><a data-href="#WSGI 서버 돌려보기" href="#WSGI_서버_돌려보기" class="internal-link" target="_self" rel="noopener">WSGI 서버 돌려보기</a></li>
</ul></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="WSGI란" dir="auto" class="heading" id="WSGI란"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>WSGI란</h3><div class="heading-children"><div><p dir="auto">WSGI란 Web Server Gateway Interface의 약자로 웹서버와 응용 프로그램의 중간에 위치해 서로간의 통신을 가능하게 한다. 읭? 그러면 일전에 다룬 <a data-href="CGI" href="network/cgi.html" class="internal-link" target="_self" rel="noopener">CGI</a>와 다를게 없지 않나? 라는 생각이 든다면 당신의 생각이 맞다. 적절히 이해했다.</p></div><div><p dir="auto"><strong>WSGI는 파이썬에 특화된 인터페이스</strong>로 CGI를 기반에 두고 있긴 하지만 엄밀히 따지자면 CGI는 아니다. CGI는 표준 입출력과 환경변수를 활용해 HTTP 요청 정보를 획득하고 응답 정보를 반환한다는 규칙만 정의할 뿐 어떤 언어를 활용해서 구현 하라는 규칙은 존재하지 않는다. (이는 FastCGI도 마찬가지이다)</p></div><div><p dir="auto">이에 따라서 <strong>HTTP 정보를 순수 파이썬으로 파싱해 파이썬 객체로 응용 프로그램에 전달하고 응용 프로그램에서도 곧장 파이썬 객체를 반환해 웹서버로 전달하고 싶다는 욕구가 발생했다.</strong> 니즈가 많은 만큼 해결법도 다양했는데, 이로 인해 웹서버 API의 춘추 전국 시대가 열리게 된다.</p></div><div><p dir="auto">사실 WSGI이전에도 웹 서버와 파이썬을 연결하는 API는 많이 존재했다. mod_python과 같이 웹 서버 소프트웨어 자체에 파이썬 인터프리터를 탑재해 웹 서버 내부에서 처리하는 방식도 존재했고 아예 웹서버 자체를 파이썬으로 작성해 곧장 파이썬 객체를 다루고 처리하는 방법도 존재했다.</p></div><div><p dir="auto">문제는 웹서버와 연결하는 방법이 다양하다 보니 실질적으로 이러한 <strong>API 뒷단에서 동작하는 프레임워크 입장에서는 지원해야하는 요소의 수가 많아지고 번잡해지는 상황이 발생했다.</strong> 이를 위해 기준을 작성할 필요가 발생했고 이때 그 기준으로 등장한 것이 WSGI이기도 하다.</p></div><div><blockquote dir="auto">
<p dir="auto">The availability and widespread use of such a2n API in web servers for Python – whether those servers are written in Python (e.g. Medusa), embed Python (e.g. mod_python), or invoke Python via a gateway protocol (e.g. CGI, FastCGI, etc.) – would separate choice of framework from choice of web server, freeing users to choose a pairing that suits them, while freeing framework and server developers to focus on their preferred area of specialization.</p>
<p dir="auto"><strong>This PEP, therefore, proposes a simple and universal interface between web servers and web applications or frameworks: the Python Web Server Gateway Interface (WSGI).</strong> <a data-tooltip-position="top" aria-label="https://peps.python.org/pep-0333/" rel="noopener" class="external-link" href="https://peps.python.org/pep-0333/" target="_blank">pep333</a></p>
</blockquote></div><div><p dir="auto">당시 문서를 확인하면 자바와 비교를 많이 하는데 이때 자바는 서블릿 기반의 공통된 시스템을 활용하고 있었기에 어떤 프레임 워크를 사용해도 웹서버를 변경해야 한다거나 하는 문제가 존재하지 않았다. <strong>이러한 구조를 파이썬에도 도입해 파이썬 &lt;-&gt; 웹 서버 간의 통일된 인터페이스를 생성하는 것이 WSGI의 탄생 비화이다.</strong></p></div><div><p dir="auto">WSGI는 요청을 받을 경우 특정한 파이썬 콜러블 객체를 실행하고 매개 변수로는 env라는 변수에 dict 타입으로 전달해야 한다는 파이썬에 특화된 <a data-tooltip-position="top" aria-label="WSGI의 규칙들" data-href="#WSGI의 규칙들" href="#WSGI의_규칙들" class="internal-link" target="_self" rel="noopener">규칙</a>이 존재한다. <strong><mark>WSGI는 이런 파이썬에 특화된 규칙을 설정 함으로써 기존 CGI에서 아쉬웠던 파이썬 네이티브로 처리하지 못한다는 문제를 해결하고 난잡했던 파이썬 어플리케이션 &lt;-&gt; 웹서버 간의 통신 프로토콜을 통일했다.</mark></strong></p></div><div><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout" dir="auto"><div class="callout-title" dir="auto"><div class="callout-icon" dir="auto"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner" dir="auto">Info</div></div><div class="callout-content" dir="auto">
<p dir="auto"><strong>This PEP, therefore, proposes a simple and universal interface between web servers and web applications or frameworks: the Python Web Server Gateway Interface (WSGI).</strong></p>
</div></div></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="WSGI의 구조" dir="auto" class="heading" id="WSGI의_구조"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>WSGI의 구조</h3><div class="heading-children"><div><p dir="auto"><strong><mark>WSGI의 가장 큰 특징은 웹 서버로 부터 받은 HTTP 요청을 특정한 파이썬 콜러블 오브젝트와 연결할 수 있다는 것이다.</mark></strong> WSGI 서버는 HTTP 요청이 오면 특정 콜러블 오브젝트를 호출하는 방식으로 동작한다. (콜러블 오브젝트는 함수 메서드 뿐아니라 <code class="code-styler-inline">__call__</code>이 구현된 모든 객체를 말한다) 이때 실행하는 콜러블 오브젝트는 어떠한 의존성도 가지면 안된다.</p></div><div><p dir="auto">WSGI는 크게 웹 서버와 소통하는 부분 어플리케이션과 소통하는 부분으로 구분할 수있다. 웹 서버와 통신하는 부분을 서버, 게이트웨이 파트라 하고 어플리케이션과 소통하는 부분을 어플리케이션, 프레임워크 파트라 하자.</p></div><div><p dir="auto">이제 WSGI를 통해서 실행하는 어플리케이션의 예시를 살펴보자. 아래 코드는 2개의 콜러블 오브젝트를 보여준다. </p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">def</span> <span class="token function">simple_app</span><span class="token punctuation">(</span>environ<span class="token punctuation">,</span> start_response<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Simplest possible application object"""</span>
    status <span class="token operator">=</span> <span class="token string">'200 OK'</span>
    response_headers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span> <span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    start_response<span class="token punctuation">(</span>status<span class="token punctuation">,</span> response_headers<span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token string">'Hello world!\n'</span><span class="token punctuation">]</span>


<span class="token keyword">class</span> <span class="token class-name">AppClass</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Produce the same output, but using a class

    (Note: 'AppClass' is the "application" here, so calling it
    returns an instance of 'AppClass', which is then the iterable
    return value of the "application callable" as required by
    the spec.

    If we wanted to use *instances* of 'AppClass' as application
    objects instead, we would have to implement a '__call__'
    method, which would be invoked to execute the application,
    and we would need to create an instance for use by the
    server or gateway.
    """</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> environ<span class="token punctuation">,</span> start_response<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>environ <span class="token operator">=</span> environ
        self<span class="token punctuation">.</span>start <span class="token operator">=</span> start_response

    <span class="token keyword">def</span> <span class="token function">__iter__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        status <span class="token operator">=</span> <span class="token string">'200 OK'</span>
        response_headers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span> <span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
        self<span class="token punctuation">.</span>start<span class="token punctuation">(</span>status<span class="token punctuation">,</span> response_headers<span class="token punctuation">)</span>
        <span class="token keyword">yield</span> <span class="token string">"Hello world!\n"</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">이러한 콜러블 객체를 WSGI 서버에 넘겨주면 WSGI는 적절한 요청을 수신할 때마다 해당 콜러블 객체를 호출한다. 이어서 서버, 게이트웨이 파트의 예시를 확인해보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">import</span> os<span class="token punctuation">,</span> sys

<span class="token keyword">def</span> <span class="token function">run_with_cgi</span><span class="token punctuation">(</span>application<span class="token punctuation">)</span><span class="token punctuation">:</span>

    environ <span class="token operator">=</span> <span class="token builtin">dict</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>environ<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    environ<span class="token punctuation">[</span><span class="token string">'wsgi.input'</span><span class="token punctuation">]</span>        <span class="token operator">=</span> sys<span class="token punctuation">.</span>stdin
    environ<span class="token punctuation">[</span><span class="token string">'wsgi.errors'</span><span class="token punctuation">]</span>       <span class="token operator">=</span> sys<span class="token punctuation">.</span>stderr
    environ<span class="token punctuation">[</span><span class="token string">'wsgi.version'</span><span class="token punctuation">]</span>      <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    environ<span class="token punctuation">[</span><span class="token string">'wsgi.multithread'</span><span class="token punctuation">]</span>  <span class="token operator">=</span> <span class="token boolean">False</span>
    environ<span class="token punctuation">[</span><span class="token string">'wsgi.multiprocess'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">True</span>
    environ<span class="token punctuation">[</span><span class="token string">'wsgi.run_once'</span><span class="token punctuation">]</span>     <span class="token operator">=</span> <span class="token boolean">True</span>

    <span class="token keyword">if</span> environ<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'HTTPS'</span><span class="token punctuation">,</span> <span class="token string">'off'</span><span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token string">'on'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        environ<span class="token punctuation">[</span><span class="token string">'wsgi.url_scheme'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'https'</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        environ<span class="token punctuation">[</span><span class="token string">'wsgi.url_scheme'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'http'</span>

    headers_set <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    headers_sent <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

    <span class="token keyword">def</span> <span class="token function">write</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> headers_set<span class="token punctuation">:</span>
             <span class="token keyword">raise</span> AssertionError<span class="token punctuation">(</span><span class="token string">"write() before start_response()"</span><span class="token punctuation">)</span>

        <span class="token keyword">elif</span> <span class="token keyword">not</span> headers_sent<span class="token punctuation">:</span>
             <span class="token comment"># Before the first output, send the stored headers</span>
             status<span class="token punctuation">,</span> response_headers <span class="token operator">=</span> headers_sent<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> headers_set
             sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'Status: %s\r\n'</span> <span class="token operator">%</span> status<span class="token punctuation">)</span>
             <span class="token keyword">for</span> header <span class="token keyword">in</span> response_headers<span class="token punctuation">:</span>
                 sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'%s: %s\r\n'</span> <span class="token operator">%</span> header<span class="token punctuation">)</span>
             sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'\r\n'</span><span class="token punctuation">)</span>

        sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        sys<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>flush<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">start_response</span><span class="token punctuation">(</span>status<span class="token punctuation">,</span> response_headers<span class="token punctuation">,</span> exc_info<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> exc_info<span class="token punctuation">:</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                <span class="token keyword">if</span> headers_sent<span class="token punctuation">:</span>
                    <span class="token comment"># Re-raise original exception if headers sent</span>
                    <span class="token keyword">raise</span> exc_info<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> exc_info<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> exc_info<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
            <span class="token keyword">finally</span><span class="token punctuation">:</span>
                exc_info <span class="token operator">=</span> <span class="token boolean">None</span>     <span class="token comment"># avoid dangling circular ref</span>
        <span class="token keyword">elif</span> headers_set<span class="token punctuation">:</span>
            <span class="token keyword">raise</span> AssertionError<span class="token punctuation">(</span><span class="token string">"Headers already set!"</span><span class="token punctuation">)</span>

        headers_set<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>status<span class="token punctuation">,</span> response_headers<span class="token punctuation">]</span>
        <span class="token keyword">return</span> write

    result <span class="token operator">=</span> application<span class="token punctuation">(</span>environ<span class="token punctuation">,</span> start_response<span class="token punctuation">)</span> <span class="token comment">#콜러블 객체를 실행</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">for</span> data <span class="token keyword">in</span> result<span class="token punctuation">:</span>
            <span class="token keyword">if</span> data<span class="token punctuation">:</span>    <span class="token comment"># don't send headers until body appears</span>
                write<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> headers_sent<span class="token punctuation">:</span>
            write<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>   <span class="token comment"># send headers now if body was empty</span>
    <span class="token keyword">finally</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>result<span class="token punctuation">,</span> <span class="token string">'close'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            result<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">다음의 코드는 대략적으로 작성한 <strong>WSGI 서버 코드로 앞단에 CGI가 존재함을 가정하고 작성했다. 코드를 확인해보면 콜러블 오브젝트인 application을 전달받아 동작하는 것을 확인할 수 있고 결과 값을 CGI의 형식을 통해 웹서버에 전달 하는 것 또한 파악이 가능하다.</strong> 따라서 이를 그림으로 나타내면 다음과 같다.</p></div><div><div class="mermaid"><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 124.796875 478.171875" height="478.171875" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="124.796875" id="md3e83883a63e37c5"><style>#md3e83883a63e37c5{font-family:var(--font-mermaid);font-size:16px;fill:var(--text-normal);}#md3e83883a63e37c5 .error-icon{fill:var(--background-primary);}#md3e83883a63e37c5 .error-text{fill:var(--text-error);stroke:var(--text-error);}#md3e83883a63e37c5 .edge-thickness-normal{stroke-width:2px;}#md3e83883a63e37c5 .edge-thickness-thick{stroke-width:3.5px;}#md3e83883a63e37c5 .edge-pattern-solid{stroke-dasharray:0;}#md3e83883a63e37c5 .edge-pattern-dashed{stroke-dasharray:3;}#md3e83883a63e37c5 .edge-pattern-dotted{stroke-dasharray:2;}#md3e83883a63e37c5 .marker{fill:var(--text-normal);stroke:var(--text-normal);}#md3e83883a63e37c5 .marker.cross{stroke:var(--text-normal);}#md3e83883a63e37c5 svg{font-family:var(--font-mermaid);font-size:16px;}#md3e83883a63e37c5 .label{font-family:var(--font-mermaid);color:var(--text-normal);}#md3e83883a63e37c5 .cluster-label text{fill:var(--text-normal);}#md3e83883a63e37c5 .cluster-label span,#md3e83883a63e37c5 p{color:var(--text-normal);}#md3e83883a63e37c5 .label text,#md3e83883a63e37c5 span,#md3e83883a63e37c5 p{fill:var(--text-normal);color:var(--text-normal);}#md3e83883a63e37c5 .node rect,#md3e83883a63e37c5 .node circle,#md3e83883a63e37c5 .node ellipse,#md3e83883a63e37c5 .node polygon,#md3e83883a63e37c5 .node path{fill:var(--background-primary);stroke:var(--text-muted);stroke-width:1px;}#md3e83883a63e37c5 .flowchart-label text{text-anchor:middle;}#md3e83883a63e37c5 .node .label{text-align:center;}#md3e83883a63e37c5 .node.clickable{cursor:pointer;}#md3e83883a63e37c5 .arrowheadPath{fill:#0b0b0b;}#md3e83883a63e37c5 .edgePath .path{stroke:var(--text-normal);stroke-width:2.0px;}#md3e83883a63e37c5 .flowchart-link{stroke:var(--text-normal);fill:none;}#md3e83883a63e37c5 .edgeLabel{background-color:var(--background-secondary);text-align:center;}#md3e83883a63e37c5 .edgeLabel rect{opacity:0.5;background-color:var(--background-secondary);fill:var(--background-secondary);}#md3e83883a63e37c5 .labelBkg{background-color:var(--background-secondary);}#md3e83883a63e37c5 .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#md3e83883a63e37c5 .cluster text{fill:var(--text-normal);}#md3e83883a63e37c5 .cluster span,#md3e83883a63e37c5 p{color:var(--text-normal);}#md3e83883a63e37c5 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:var(--font-mermaid);font-size:12px;background:var(--background-secondary-alt);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#md3e83883a63e37c5 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:var(--text-normal);}#md3e83883a63e37c5 foreignObject{overflow:visible;}#md3e83883a63e37c5 #arrowhead,#md3e83883a63e37c5 #sequencenumber,#md3e83883a63e37c5 .cluster text,#md3e83883a63e37c5 .label text,#md3e83883a63e37c5 text,#md3e83883a63e37c5 text.actor{fill:var(--text-normal);}#md3e83883a63e37c5 line{stroke:var(--text-normal);}#md3e83883a63e37c5 g&gt;g&gt;circle,#md3e83883a63e37c5 g&gt;g&gt;path{stroke:var(--background-accent);color:var(--text-normal);}#md3e83883a63e37c5 .label rect{display:none;}#md3e83883a63e37c5 .cluster rect{stroke-width:1px;}#md3e83883a63e37c5 .node circle,#md3e83883a63e37c5 .node ellipse,#md3e83883a63e37c5 .node path,#md3e83883a63e37c5 .node polygon,#md3e83883a63e37c5 .node rect{fill:var(--background-secondary-alt);stroke:var(--background-modifier-border);stroke-width:1px;}#md3e83883a63e37c5 .node .label{text-align:center;}#md3e83883a63e37c5 .node.clickable{cursor:pointer;}#md3e83883a63e37c5 .arrowheadPath{fill:var(--text-muted);}#md3e83883a63e37c5 .edgePath .path{stroke:var(--text-muted);stroke-width:1.5px;}#md3e83883a63e37c5 .edgeLabel{background-color:var(--background-primary);text-align:center;}#md3e83883a63e37c5 .cluster rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border);}#md3e83883a63e37c5 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-size:12px;background:var(--background-secondary);border:1px solid var(--interactive-accent);border-radius:2px;pointer-events:none;z-index:100;}#md3e83883a63e37c5 .actor{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt);font-family:inherit!important;}#md3e83883a63e37c5 text.actor{stroke:none;}#md3e83883a63e37c5 .actor-line{stroke:var(--text-muted);}#md3e83883a63e37c5 .messageLine0,#md3e83883a63e37c5 .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:var(--text-normal);}#md3e83883a63e37c5 #crosshead path{fill:var(--text-normal)!important;stroke:var(--text-normal)!important;}#md3e83883a63e37c5 .messageText{fill:var(--text-normal);stroke:none;font-family:inherit!important;}#md3e83883a63e37c5 .labelBox{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt);}#md3e83883a63e37c5 .labelText,#md3e83883a63e37c5 .loopText{fill:var(--text-normal);stroke:none;}#md3e83883a63e37c5 .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:var(--background-modifier-border);}#md3e83883a63e37c5 .activation0,#md3e83883a63e37c5 .activation1,#md3e83883a63e37c5 .activation2{fill:var(--background-secondary) stroke:var(--text-muted);}#md3e83883a63e37c5 .section{stroke:none;opacity:.2;}#md3e83883a63e37c5 .section0,#md3e83883a63e37c5 .section2{fill:var(--text-accent);}#md3e83883a63e37c5 .section1,#md3e83883a63e37c5 .section3{fill:#fff;opacity:.2;}#md3e83883a63e37c5 .sectionTitle0,#md3e83883a63e37c5 .sectionTitle1,#md3e83883a63e37c5 .sectionTitle2,#md3e83883a63e37c5 .sectionTitle3{fill:var(--text-normal);}#md3e83883a63e37c5 .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;}#md3e83883a63e37c5 .grid .tick{stroke:var(--background-primary-alt);opacity:.8;shape-rendering:crispEdges;}#md3e83883a63e37c5 .grid path{stroke-width:0;}#md3e83883a63e37c5 .today{fill:none;stroke:#d42;stroke-width:2px;}#md3e83883a63e37c5 .task{stroke-width:2;}#md3e83883a63e37c5 .taskText{text-anchor:middle;}#md3e83883a63e37c5 .taskText:not([font-size]){font-size:11px;}#md3e83883a63e37c5 .taskTextOutsideRight{fill:var(--text-normal);text-anchor:start;font-size:11px;}#md3e83883a63e37c5 .taskTextOutsideLeft{fill:var(--text-normal);text-anchor:end;font-size:11px;}#md3e83883a63e37c5 .task.clickable,#md3e83883a63e37c5 g.clickable{cursor:pointer;}#md3e83883a63e37c5 .taskText.clickable,#md3e83883a63e37c5 .taskTextOutsideLeft.clickable,#md3e83883a63e37c5 .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:700;}#md3e83883a63e37c5 .taskText0,#md3e83883a63e37c5 .taskText1,#md3e83883a63e37c5 .taskText2,#md3e83883a63e37c5 .taskText3{fill:#fff;}#md3e83883a63e37c5 .task0,#md3e83883a63e37c5 .task1,#md3e83883a63e37c5 .task2,#md3e83883a63e37c5 .task3{fill:var(--interactive-accent);stroke:var(--interactive-accent);}#md3e83883a63e37c5 .taskTextOutside0,#md3e83883a63e37c5 .taskTextOutside1,#md3e83883a63e37c5 .taskTextOutside2,#md3e83883a63e37c5 .taskTextOutside3{fill:var(--text-normal);}#md3e83883a63e37c5 .active0,#md3e83883a63e37c5 .active1,#md3e83883a63e37c5 .active2,#md3e83883a63e37c5 .active3,#md3e83883a63e37c5 g.classGroup rect,#md3e83883a63e37c5 g.stateGroup rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border);}#md3e83883a63e37c5 g.classGroup rect,#md3e83883a63e37c5 g.stateGroup rect{stroke:var(--background-modifier-border);}#md3e83883a63e37c5 .activeText0,#md3e83883a63e37c5 .activeText1,#md3e83883a63e37c5 .activeText2,#md3e83883a63e37c5 .activeText3{fill:var(--text-normal)!important;}#md3e83883a63e37c5 .done0,#md3e83883a63e37c5 .done1,#md3e83883a63e37c5 .done2,#md3e83883a63e37c5 .done3{stroke:var(--text-muted);fill:#bbb;stroke-width:2;}#md3e83883a63e37c5 .doneText0,#md3e83883a63e37c5 .doneText1,#md3e83883a63e37c5 .doneText2,#md3e83883a63e37c5 .doneText3{fill:var(--text-normal)!important;}#md3e83883a63e37c5 .crit0,#md3e83883a63e37c5 .crit1,#md3e83883a63e37c5 .crit2,#md3e83883a63e37c5 .crit3{stroke:#b1361b;fill:#d42;stroke-width:2;}#md3e83883a63e37c5 .activeCrit0,#md3e83883a63e37c5 .activeCrit1,#md3e83883a63e37c5 .activeCrit2,#md3e83883a63e37c5 .activeCrit3,#md3e83883a63e37c5 .classLabel .box{stroke:#b1361b;fill:var(--background-secondary-alt);stroke-width:2;}#md3e83883a63e37c5 .classLabel .box{stroke:none;stroke-width:0;opacity:.5;}#md3e83883a63e37c5 .doneCrit0,#md3e83883a63e37c5 .doneCrit1,#md3e83883a63e37c5 .doneCrit2,#md3e83883a63e37c5 .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges;}#md3e83883a63e37c5 .milestone{transform:rotate(45deg) scale(.8,.8);}#md3e83883a63e37c5 .milestoneText{font-style:italic;}#md3e83883a63e37c5 .activeCritText0,#md3e83883a63e37c5 .activeCritText1,#md3e83883a63e37c5 .activeCritText2,#md3e83883a63e37c5 .activeCritText3,#md3e83883a63e37c5 .doneCritText0,#md3e83883a63e37c5 .doneCritText1,#md3e83883a63e37c5 .doneCritText2,#md3e83883a63e37c5 .doneCritText3{fill:var(--text-normal)!important;}#md3e83883a63e37c5 .titleText{text-anchor:middle;font-size:18px;fill:var(--text-normal);}#md3e83883a63e37c5 g.classGroup text{fill:var(--text-normal);stroke:none;font-size:11px;}#md3e83883a63e37c5 g.classGroup text .title{font-weight:bolder;}#md3e83883a63e37c5 #aggregationEnd,#md3e83883a63e37c5 #aggregationStart,#md3e83883a63e37c5 #compositionEnd,#md3e83883a63e37c5 #compositionStart,#md3e83883a63e37c5 g.classGroup line,#md3e83883a63e37c5 g.stateGroup line{stroke:var(--background-modifier-border);stroke-width:1;}#md3e83883a63e37c5 .classLabel .label{font-size:11px;}#md3e83883a63e37c5 .relation{fill:none;}#md3e83883a63e37c5 .dashed-line{stroke-dasharray:3;}#md3e83883a63e37c5 #compositionEnd,#md3e83883a63e37c5 #compositionStart{fill:var(--background-modifier-border);}#md3e83883a63e37c5 #aggregationEnd,#md3e83883a63e37c5 #aggregationStart{fill:var(--background-secondary-alt);}#md3e83883a63e37c5 #dependencyEnd,#md3e83883a63e37c5 #dependencyStart,#md3e83883a63e37c5 #extensionEnd,#md3e83883a63e37c5 #extensionStart{fill:var(--background-modifier-border);stroke:var(--background-modifier-border);stroke-width:1;}#md3e83883a63e37c5 .branch-label,#md3e83883a63e37c5 .commit-id,#md3e83883a63e37c5 .commit-msg{fill:#d3d3d3;color:#d3d3d3;}#md3e83883a63e37c5 .pieTitleText{text-anchor:middle;font-size:25px;fill:var(--text-normal);}#md3e83883a63e37c5 .state-note text,#md3e83883a63e37c5 g.stateGroup text{stroke:none;font-size:10px;}#md3e83883a63e37c5 g.stateGroup .state-title{font-weight:bolder;fill:var(--text-normal);}#md3e83883a63e37c5 .stateGroup .composit{fill:#fff;border-bottom:1px;}#md3e83883a63e37c5 .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#md3e83883a63e37c5 .state-note{stroke:#645c10;fill:#f3edb3;}#md3e83883a63e37c5 .state-note text{fill:#000;}#md3e83883a63e37c5 .stateLabel .box{stroke:none;stroke-width:0;fill:var(--background-secondary-alt);opacity:.5;}#md3e83883a63e37c5 .stateLabel text{fill:var(--text-normal);font-size:10px;font-weight:700;}#md3e83883a63e37c5 .node circle.state-start{fill:var(--text-normal);stroke:var(--text-normal);}#md3e83883a63e37c5 .node circle.state-end{stroke:var(--background-primary);stroke-width:2;}#md3e83883a63e37c5 #statediagram-barbEnd,#md3e83883a63e37c5 g.stateGroup text{fill:var(--background-modifier-border);}#md3e83883a63e37c5 .statediagram-cluster rect{stroke-width:1px;}#md3e83883a63e37c5 .statediagram-cluster rect,#md3e83883a63e37c5 .statediagram-state .divider{stroke:var(--background-modifier-border);}#md3e83883a63e37c5 .statediagram-cluster rect .inner{fill:var(--background-secondary-alt);}#md3e83883a63e37c5 .statediagram-cluster.statediagram-cluster-alt .inner{fill:var(--background-secondary);}#md3e83883a63e37c5 .cluster-label text,#md3e83883a63e37c5 .node circle.state-end{fill:var(--text-normal);}#md3e83883a63e37c5 .statediagram-state rect.divider{stroke-dasharray:10,10;fill:var(--background-secondary);}#md3e83883a63e37c5 .note-edge{stroke-dasharray:5;}#md3e83883a63e37c5 .statediagram-note rect{fill:#f3edb3;stroke:#645c10;stroke-width:1px;}#md3e83883a63e37c5 .error-icon{fill:var(--background-modifier-error);}#md3e83883a63e37c5 .error-text{fill:var(--text-error);stroke:var(--text-error);}#md3e83883a63e37c5 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" class="marker flowchart" id="md3e83883a63e37c5-md3e83883a63e37c5_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart" id="md3e83883a63e37c5-md3e83883a63e37c5_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="md3e83883a63e37c5-md3e83883a63e37c5_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="md3e83883a63e37c5-md3e83883a63e37c5_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="md3e83883a63e37c5-md3e83883a63e37c5_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="md3e83883a63e37c5-md3e83883a63e37c5_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#md3e83883a63e37c5-md3e83883a63e37c5_flowchart-pointEnd)" marker-start="url(#md3e83883a63e37c5-md3e83883a63e37c5_flowchart-pointStart)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-Client LE-WebServer" id="L-Client-WebServer-0" d="M54.398,41.097L54.398,46.113C54.398,51.13,54.398,61.163,54.398,71.195C54.398,81.228,54.398,91.261,54.398,96.277L54.398,101.294"></path><path marker-end="url(#md3e83883a63e37c5-md3e83883a63e37c5_flowchart-pointEnd)" marker-start="url(#md3e83883a63e37c5-md3e83883a63e37c5_flowchart-pointStart)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-WebServer LE-CGI" id="L-WebServer-CGI-0" d="M54.398,147.691L54.398,152.707C54.398,157.723,54.398,167.756,54.398,177.789C54.398,187.822,54.398,197.855,54.398,202.871L54.398,207.888"></path><path marker-end="url(#md3e83883a63e37c5-md3e83883a63e37c5_flowchart-pointEnd)" marker-start="url(#md3e83883a63e37c5-md3e83883a63e37c5_flowchart-pointStart)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-CGI LE-run_with_cgi" id="L-CGI-run_with_cgi-0" d="M54.398,254.284L54.398,259.301C54.398,264.317,54.398,274.35,54.398,284.383C54.398,294.416,54.398,304.448,54.398,309.465L54.398,314.481"></path><path marker-end="url(#md3e83883a63e37c5-md3e83883a63e37c5_flowchart-pointEnd)" marker-start="url(#md3e83883a63e37c5-md3e83883a63e37c5_flowchart-pointStart)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-run_with_cgi LE-Application" id="L-run_with_cgi-Application-0" d="M54.398,360.878L54.398,365.895C54.398,370.911,54.398,380.944,54.398,390.977C54.398,401.009,54.398,411.042,54.398,416.059L54.398,421.075"></path></g><g class="edgeLabels"><g transform="translate(54.3984375, 71.1953125)" class="edgeLabel"><g transform="translate(-21.2734375, -10.3984375)" class="label"><foreignObject height="20.796875" width="42.546875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">HTTP</span></div></foreignObject></g></g><g transform="translate(54.3984375, 177.7890625)" class="edgeLabel"><g transform="translate(-21.2734375, -10.3984375)" class="label"><foreignObject height="20.796875" width="42.546875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">HTTP</span></div></foreignObject></g></g><g transform="translate(54.3984375, 284.3828125)" class="edgeLabel"><g transform="translate(-37.046875, -10.3984375)" class="label"><foreignObject height="20.796875" width="74.09375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">StdIn,Out</span></div></foreignObject></g></g><g transform="translate(54.3984375, 390.9765625)" class="edgeLabel"><g transform="translate(-53.95703125, -10.3984375)" class="label"><foreignObject height="20.796875" width="107.9140625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">Python Object</span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(54.3984375, 17.8984375)" id="flowchart-Client-198" class="node default default flowchart-label"><rect height="35.796875" width="59.0703125" y="-17.8984375" x="-29.53515625" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-22.03515625, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="44.0703125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Client</span></div></foreignObject></g></g><g transform="translate(54.3984375, 124.4921875)" id="flowchart-WebServer-199" class="node default default flowchart-label"><rect height="35.796875" width="98.234375" y="-17.8984375" x="-49.1171875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-41.6171875, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="83.234375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">WebServer</span></div></foreignObject></g></g><g transform="translate(54.3984375, 231.0859375)" id="flowchart-CGI-200" class="node default default flowchart-label"><rect height="35.796875" width="45.6171875" y="-17.8984375" x="-22.80859375" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-15.30859375, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="30.6171875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">CGI</span></div></foreignObject></g></g><g transform="translate(54.3984375, 337.6796875)" id="flowchart-run_with_cgi-201" class="node default default flowchart-label"><rect height="35.796875" width="108.796875" y="-17.8984375" x="-54.3984375" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-46.8984375, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="93.796875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">run_with_cgi</span></div></foreignObject></g></g><g transform="translate(54.3984375, 444.2734375)" id="flowchart-Application-202" class="node default default flowchart-label"><rect height="35.796875" width="99.734375" y="-17.8984375" x="-49.8671875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-42.3671875, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="84.734375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Application</span></div></foreignObject></g></g></g></g></g></svg></div></div><div><p dir="auto">이는 초창기 장고에서 사용 됐던 패턴으로 옛날의 WSGI가 완전히 자리잡기 전까지 장고는 flup이라는 라이브러리를 활용해 위와 같은 구조를 사용했다. (run_with_cgi자리에 flup이 사용됐다)</p></div><div><p dir="auto">추가적으로 확인할 만한 부분은 동적 수행을 원하는 HTTP 요청마다 콜러블 오브젝트를 실행해야 하므로  <code class="code-styler-inline">run_with_cgi</code>는 요청마다 수행된다. </p></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="WSGI 정리" dir="auto" class="heading" id="WSGI_정리"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>WSGI 정리</h3><div class="heading-children"><div><p dir="auto"><strong>WSGI는 웹서버와 응용 프로그램 중간에 위치해 웹서버의 요청을 특정한 파이썬 콜러블 객체로 매핑하는 기능을 수행한다.</strong> 이후 콜러블 객체가 반환한 바이트 형식의 데이터를 웹서버에 적절한 HTTP Response로 전달하는 기능을 수행한다. 따라서 그림으로 나타내자면 WSGI는 아래와 같은 위치에 놓이게 된다.</p></div><div><div class="mermaid"><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 587.390625 51.796875" height="51.796875" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" width="587.390625" id="m05790663897fbf8f"><style>#m05790663897fbf8f{font-family:var(--font-mermaid);font-size:16px;fill:var(--text-normal);}#m05790663897fbf8f .error-icon{fill:var(--background-primary);}#m05790663897fbf8f .error-text{fill:var(--text-error);stroke:var(--text-error);}#m05790663897fbf8f .edge-thickness-normal{stroke-width:2px;}#m05790663897fbf8f .edge-thickness-thick{stroke-width:3.5px;}#m05790663897fbf8f .edge-pattern-solid{stroke-dasharray:0;}#m05790663897fbf8f .edge-pattern-dashed{stroke-dasharray:3;}#m05790663897fbf8f .edge-pattern-dotted{stroke-dasharray:2;}#m05790663897fbf8f .marker{fill:var(--text-normal);stroke:var(--text-normal);}#m05790663897fbf8f .marker.cross{stroke:var(--text-normal);}#m05790663897fbf8f svg{font-family:var(--font-mermaid);font-size:16px;}#m05790663897fbf8f .label{font-family:var(--font-mermaid);color:var(--text-normal);}#m05790663897fbf8f .cluster-label text{fill:var(--text-normal);}#m05790663897fbf8f .cluster-label span,#m05790663897fbf8f p{color:var(--text-normal);}#m05790663897fbf8f .label text,#m05790663897fbf8f span,#m05790663897fbf8f p{fill:var(--text-normal);color:var(--text-normal);}#m05790663897fbf8f .node rect,#m05790663897fbf8f .node circle,#m05790663897fbf8f .node ellipse,#m05790663897fbf8f .node polygon,#m05790663897fbf8f .node path{fill:var(--background-primary);stroke:var(--text-muted);stroke-width:1px;}#m05790663897fbf8f .flowchart-label text{text-anchor:middle;}#m05790663897fbf8f .node .label{text-align:center;}#m05790663897fbf8f .node.clickable{cursor:pointer;}#m05790663897fbf8f .arrowheadPath{fill:#0b0b0b;}#m05790663897fbf8f .edgePath .path{stroke:var(--text-normal);stroke-width:2.0px;}#m05790663897fbf8f .flowchart-link{stroke:var(--text-normal);fill:none;}#m05790663897fbf8f .edgeLabel{background-color:var(--background-secondary);text-align:center;}#m05790663897fbf8f .edgeLabel rect{opacity:0.5;background-color:var(--background-secondary);fill:var(--background-secondary);}#m05790663897fbf8f .labelBkg{background-color:var(--background-secondary);}#m05790663897fbf8f .cluster rect{fill:hsl(220.5882352941, 100%, 98.3333333333%);stroke:hsl(220.5882352941, 60%, 88.3333333333%);stroke-width:1px;}#m05790663897fbf8f .cluster text{fill:var(--text-normal);}#m05790663897fbf8f .cluster span,#m05790663897fbf8f p{color:var(--text-normal);}#m05790663897fbf8f div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:var(--font-mermaid);font-size:12px;background:var(--background-secondary-alt);border:1px solid hsl(220.5882352941, 60%, 88.3333333333%);border-radius:2px;pointer-events:none;z-index:100;}#m05790663897fbf8f .flowchartTitleText{text-anchor:middle;font-size:18px;fill:var(--text-normal);}#m05790663897fbf8f foreignObject{overflow:visible;}#m05790663897fbf8f #arrowhead,#m05790663897fbf8f #sequencenumber,#m05790663897fbf8f .cluster text,#m05790663897fbf8f .label text,#m05790663897fbf8f text,#m05790663897fbf8f text.actor{fill:var(--text-normal);}#m05790663897fbf8f line{stroke:var(--text-normal);}#m05790663897fbf8f g&gt;g&gt;circle,#m05790663897fbf8f g&gt;g&gt;path{stroke:var(--background-accent);color:var(--text-normal);}#m05790663897fbf8f .label rect{display:none;}#m05790663897fbf8f .cluster rect{stroke-width:1px;}#m05790663897fbf8f .node circle,#m05790663897fbf8f .node ellipse,#m05790663897fbf8f .node path,#m05790663897fbf8f .node polygon,#m05790663897fbf8f .node rect{fill:var(--background-secondary-alt);stroke:var(--background-modifier-border);stroke-width:1px;}#m05790663897fbf8f .node .label{text-align:center;}#m05790663897fbf8f .node.clickable{cursor:pointer;}#m05790663897fbf8f .arrowheadPath{fill:var(--text-muted);}#m05790663897fbf8f .edgePath .path{stroke:var(--text-muted);stroke-width:1.5px;}#m05790663897fbf8f .edgeLabel{background-color:var(--background-primary);text-align:center;}#m05790663897fbf8f .cluster rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border);}#m05790663897fbf8f div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-size:12px;background:var(--background-secondary);border:1px solid var(--interactive-accent);border-radius:2px;pointer-events:none;z-index:100;}#m05790663897fbf8f .actor{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt);font-family:inherit!important;}#m05790663897fbf8f text.actor{stroke:none;}#m05790663897fbf8f .actor-line{stroke:var(--text-muted);}#m05790663897fbf8f .messageLine0,#m05790663897fbf8f .messageLine1{stroke-width:1.5;stroke-dasharray:'2 2';stroke:var(--text-normal);}#m05790663897fbf8f #crosshead path{fill:var(--text-normal)!important;stroke:var(--text-normal)!important;}#m05790663897fbf8f .messageText{fill:var(--text-normal);stroke:none;font-family:inherit!important;}#m05790663897fbf8f .labelBox{stroke:var(--background-modifier-border);fill:var(--background-secondary-alt);}#m05790663897fbf8f .labelText,#m05790663897fbf8f .loopText{fill:var(--text-normal);stroke:none;}#m05790663897fbf8f .loopLine{stroke-width:2;stroke-dasharray:'2 2';stroke:var(--background-modifier-border);}#m05790663897fbf8f .activation0,#m05790663897fbf8f .activation1,#m05790663897fbf8f .activation2{fill:var(--background-secondary) stroke:var(--text-muted);}#m05790663897fbf8f .section{stroke:none;opacity:.2;}#m05790663897fbf8f .section0,#m05790663897fbf8f .section2{fill:var(--text-accent);}#m05790663897fbf8f .section1,#m05790663897fbf8f .section3{fill:#fff;opacity:.2;}#m05790663897fbf8f .sectionTitle0,#m05790663897fbf8f .sectionTitle1,#m05790663897fbf8f .sectionTitle2,#m05790663897fbf8f .sectionTitle3{fill:var(--text-normal);}#m05790663897fbf8f .sectionTitle{text-anchor:start;font-size:11px;text-height:14px;}#m05790663897fbf8f .grid .tick{stroke:var(--background-primary-alt);opacity:.8;shape-rendering:crispEdges;}#m05790663897fbf8f .grid path{stroke-width:0;}#m05790663897fbf8f .today{fill:none;stroke:#d42;stroke-width:2px;}#m05790663897fbf8f .task{stroke-width:2;}#m05790663897fbf8f .taskText{text-anchor:middle;}#m05790663897fbf8f .taskText:not([font-size]){font-size:11px;}#m05790663897fbf8f .taskTextOutsideRight{fill:var(--text-normal);text-anchor:start;font-size:11px;}#m05790663897fbf8f .taskTextOutsideLeft{fill:var(--text-normal);text-anchor:end;font-size:11px;}#m05790663897fbf8f .task.clickable,#m05790663897fbf8f g.clickable{cursor:pointer;}#m05790663897fbf8f .taskText.clickable,#m05790663897fbf8f .taskTextOutsideLeft.clickable,#m05790663897fbf8f .taskTextOutsideRight.clickable{cursor:pointer;fill:#003163!important;font-weight:700;}#m05790663897fbf8f .taskText0,#m05790663897fbf8f .taskText1,#m05790663897fbf8f .taskText2,#m05790663897fbf8f .taskText3{fill:#fff;}#m05790663897fbf8f .task0,#m05790663897fbf8f .task1,#m05790663897fbf8f .task2,#m05790663897fbf8f .task3{fill:var(--interactive-accent);stroke:var(--interactive-accent);}#m05790663897fbf8f .taskTextOutside0,#m05790663897fbf8f .taskTextOutside1,#m05790663897fbf8f .taskTextOutside2,#m05790663897fbf8f .taskTextOutside3{fill:var(--text-normal);}#m05790663897fbf8f .active0,#m05790663897fbf8f .active1,#m05790663897fbf8f .active2,#m05790663897fbf8f .active3,#m05790663897fbf8f g.classGroup rect,#m05790663897fbf8f g.stateGroup rect{fill:var(--background-primary-alt);stroke:var(--background-modifier-border);}#m05790663897fbf8f g.classGroup rect,#m05790663897fbf8f g.stateGroup rect{stroke:var(--background-modifier-border);}#m05790663897fbf8f .activeText0,#m05790663897fbf8f .activeText1,#m05790663897fbf8f .activeText2,#m05790663897fbf8f .activeText3{fill:var(--text-normal)!important;}#m05790663897fbf8f .done0,#m05790663897fbf8f .done1,#m05790663897fbf8f .done2,#m05790663897fbf8f .done3{stroke:var(--text-muted);fill:#bbb;stroke-width:2;}#m05790663897fbf8f .doneText0,#m05790663897fbf8f .doneText1,#m05790663897fbf8f .doneText2,#m05790663897fbf8f .doneText3{fill:var(--text-normal)!important;}#m05790663897fbf8f .crit0,#m05790663897fbf8f .crit1,#m05790663897fbf8f .crit2,#m05790663897fbf8f .crit3{stroke:#b1361b;fill:#d42;stroke-width:2;}#m05790663897fbf8f .activeCrit0,#m05790663897fbf8f .activeCrit1,#m05790663897fbf8f .activeCrit2,#m05790663897fbf8f .activeCrit3,#m05790663897fbf8f .classLabel .box{stroke:#b1361b;fill:var(--background-secondary-alt);stroke-width:2;}#m05790663897fbf8f .classLabel .box{stroke:none;stroke-width:0;opacity:.5;}#m05790663897fbf8f .doneCrit0,#m05790663897fbf8f .doneCrit1,#m05790663897fbf8f .doneCrit2,#m05790663897fbf8f .doneCrit3{stroke:#b1361b;fill:#bbb;stroke-width:2;cursor:pointer;shape-rendering:crispEdges;}#m05790663897fbf8f .milestone{transform:rotate(45deg) scale(.8,.8);}#m05790663897fbf8f .milestoneText{font-style:italic;}#m05790663897fbf8f .activeCritText0,#m05790663897fbf8f .activeCritText1,#m05790663897fbf8f .activeCritText2,#m05790663897fbf8f .activeCritText3,#m05790663897fbf8f .doneCritText0,#m05790663897fbf8f .doneCritText1,#m05790663897fbf8f .doneCritText2,#m05790663897fbf8f .doneCritText3{fill:var(--text-normal)!important;}#m05790663897fbf8f .titleText{text-anchor:middle;font-size:18px;fill:var(--text-normal);}#m05790663897fbf8f g.classGroup text{fill:var(--text-normal);stroke:none;font-size:11px;}#m05790663897fbf8f g.classGroup text .title{font-weight:bolder;}#m05790663897fbf8f #aggregationEnd,#m05790663897fbf8f #aggregationStart,#m05790663897fbf8f #compositionEnd,#m05790663897fbf8f #compositionStart,#m05790663897fbf8f g.classGroup line,#m05790663897fbf8f g.stateGroup line{stroke:var(--background-modifier-border);stroke-width:1;}#m05790663897fbf8f .classLabel .label{font-size:11px;}#m05790663897fbf8f .relation{fill:none;}#m05790663897fbf8f .dashed-line{stroke-dasharray:3;}#m05790663897fbf8f #compositionEnd,#m05790663897fbf8f #compositionStart{fill:var(--background-modifier-border);}#m05790663897fbf8f #aggregationEnd,#m05790663897fbf8f #aggregationStart{fill:var(--background-secondary-alt);}#m05790663897fbf8f #dependencyEnd,#m05790663897fbf8f #dependencyStart,#m05790663897fbf8f #extensionEnd,#m05790663897fbf8f #extensionStart{fill:var(--background-modifier-border);stroke:var(--background-modifier-border);stroke-width:1;}#m05790663897fbf8f .branch-label,#m05790663897fbf8f .commit-id,#m05790663897fbf8f .commit-msg{fill:#d3d3d3;color:#d3d3d3;}#m05790663897fbf8f .pieTitleText{text-anchor:middle;font-size:25px;fill:var(--text-normal);}#m05790663897fbf8f .state-note text,#m05790663897fbf8f g.stateGroup text{stroke:none;font-size:10px;}#m05790663897fbf8f g.stateGroup .state-title{font-weight:bolder;fill:var(--text-normal);}#m05790663897fbf8f .stateGroup .composit{fill:#fff;border-bottom:1px;}#m05790663897fbf8f .stateGroup .alt-composit{fill:#e0e0e0;border-bottom:1px;}#m05790663897fbf8f .state-note{stroke:#645c10;fill:#f3edb3;}#m05790663897fbf8f .state-note text{fill:#000;}#m05790663897fbf8f .stateLabel .box{stroke:none;stroke-width:0;fill:var(--background-secondary-alt);opacity:.5;}#m05790663897fbf8f .stateLabel text{fill:var(--text-normal);font-size:10px;font-weight:700;}#m05790663897fbf8f .node circle.state-start{fill:var(--text-normal);stroke:var(--text-normal);}#m05790663897fbf8f .node circle.state-end{stroke:var(--background-primary);stroke-width:2;}#m05790663897fbf8f #statediagram-barbEnd,#m05790663897fbf8f g.stateGroup text{fill:var(--background-modifier-border);}#m05790663897fbf8f .statediagram-cluster rect{stroke-width:1px;}#m05790663897fbf8f .statediagram-cluster rect,#m05790663897fbf8f .statediagram-state .divider{stroke:var(--background-modifier-border);}#m05790663897fbf8f .statediagram-cluster rect .inner{fill:var(--background-secondary-alt);}#m05790663897fbf8f .statediagram-cluster.statediagram-cluster-alt .inner{fill:var(--background-secondary);}#m05790663897fbf8f .cluster-label text,#m05790663897fbf8f .node circle.state-end{fill:var(--text-normal);}#m05790663897fbf8f .statediagram-state rect.divider{stroke-dasharray:10,10;fill:var(--background-secondary);}#m05790663897fbf8f .note-edge{stroke-dasharray:5;}#m05790663897fbf8f .statediagram-note rect{fill:#f3edb3;stroke:#645c10;stroke-width:1px;}#m05790663897fbf8f .error-icon{fill:var(--background-modifier-error);}#m05790663897fbf8f .error-text{fill:var(--text-error);stroke:var(--text-error);}#m05790663897fbf8f :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="6" viewBox="0 0 10 10" class="marker flowchart" id="m05790663897fbf8f-m05790663897fbf8f_flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart" id="m05790663897fbf8f-m05790663897fbf8f_flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="m05790663897fbf8f-m05790663897fbf8f_flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="m05790663897fbf8f-m05790663897fbf8f_flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="m05790663897fbf8f-m05790663897fbf8f_flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="m05790663897fbf8f-m05790663897fbf8f_flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#m05790663897fbf8f-m05790663897fbf8f_flowchart-pointEnd)" marker-start="url(#m05790663897fbf8f-m05790663897fbf8f_flowchart-pointStart)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-WebServer LE-WSGIServer" id="L-WebServer-WSGIServer-0" d="M103.534,17.898L110.363,17.898C117.192,17.898,130.85,17.898,144.508,17.898C158.166,17.898,171.823,17.898,178.652,17.898L185.481,17.898"></path><path marker-end="url(#m05790663897fbf8f-m05790663897fbf8f_flowchart-pointEnd)" marker-start="url(#m05790663897fbf8f-m05790663897fbf8f_flowchart-pointStart)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-WSGIServer LE-Application" id="L-WSGIServer-Application-0" d="M305.066,17.898L318.507,17.898C331.947,17.898,358.829,17.898,385.711,17.898C412.593,17.898,439.474,17.898,452.915,17.898L466.356,17.898"></path></g><g class="edgeLabels"><g transform="translate(144.5078125, 17.8984375)" class="edgeLabel"><g transform="translate(-21.2734375, -10.3984375)" class="label"><foreignObject height="20.796875" width="42.546875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">HTTP</span></div></foreignObject></g></g><g transform="translate(385.7109375, 17.8984375)" class="edgeLabel"><g transform="translate(-60.9453125, -10.3984375)" class="label"><foreignObject height="20.796875" width="121.890625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">WSGI(Callalble)</span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(49.1171875, 17.8984375)" id="flowchart-WebServer-203" class="node default default flowchart-label"><rect height="35.796875" width="98.234375" y="-17.8984375" x="-49.1171875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-41.6171875, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="83.234375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">WebServer</span></div></foreignObject></g></g><g transform="translate(245.2734375, 17.8984375)" id="flowchart-WSGIServer-204" class="node default default flowchart-label"><rect height="35.796875" width="108.984375" y="-17.8984375" x="-54.4921875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-46.9921875, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="93.984375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">WSGIServer</span></div></foreignObject></g></g><g transform="translate(521.5234375, 17.8984375)" id="flowchart-Application-205" class="node default default flowchart-label"><rect height="35.796875" width="99.734375" y="-17.8984375" x="-49.8671875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-42.3671875, -10.3984375)" style="" class="label"><rect></rect><foreignObject height="20.796875" width="84.734375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Application</span></div></foreignObject></g></g></g></g></g></svg></div></div><div><p dir="auto"><strong>WSGI 또한 CGI와 마찬가지로 하나의 규약이라는 것을 잊지말자 WSGI는 파이썬 어플리케이션과 웹서버가 콜러블 오브젝트를 통해 통신하는 규칙을 정의한 것이지 실제 구현체를 의미하진 않는다.</strong> WSGI의 구현체로는 Gunicorn이나 uWsgi 등의 패키지가 존재한다. </p></div><div><div data-callout-metadata="" data-callout-fold="" data-callout="info" class="callout" dir="auto"><div class="callout-title" dir="auto"><div class="callout-icon" dir="auto"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-info"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4"></path><path d="M12 8h.01"></path></svg></div><div class="callout-title-inner" dir="auto">Info</div></div><div class="callout-content" dir="auto">
<p dir="auto"><strong>WSGI는 파이썬의 콜러블 오브젝트를 활용해 웹서버와 어플리케이션이 통신을 하게하는 규칙이다.</strong> </p>
</div></div></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="WSGI의 규칙들" dir="auto" class="heading" id="WSGI의_규칙들"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>WSGI의 규칙들</h3><div class="heading-children"><div><p dir="auto">WSGI에는 여러 규칙이 존재하지만, 이중 몇가지만 살펴보는 작업을 수행한다. 우선적으로 WSGI에서 핵심적으로 처리하는 applicaiton 객체와 관련된 규칙을 살펴본다.</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><strong>application 객체는 environ, start_response를 매개변수로 전달 받는다</strong><br>
<code class="code-styler-inline">environ</code>은 파이썬 딕셔너리 객체로 HTTP 요청과 웹서버에 대한 정보들을 전달 받는 부분이다. (Content-Length, Server-Port, Query, ...)<br>
<code class="code-styler-inline">start_response</code>는 응답을 생성하는 콜러블 객체로 무조건 바이트 문자열을 반환해야 한다. 해당 문자열은 응답 HTTP 메시지의 body란에 작성된다.</li>
</ul></div><div><p dir="auto">위의 규칙을 만족하는 WSGI에 적합한 콜러블 application을 작성하면 아래의 예시와 흡사하다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">def</span> <span class="token function">application</span><span class="token punctuation">(</span>env<span class="token punctuation">:</span><span class="token builtin">dict</span><span class="token punctuation">,</span> start_response<span class="token punctuation">:</span>Callable<span class="token punctuation">)</span><span class="token punctuation">:</span>
	body<span class="token punctuation">:</span><span class="token builtin">bytes</span> <span class="token operator">=</span> start_response<span class="token punctuation">(</span>status<span class="token punctuation">:</span><span class="token builtin">int</span><span class="token punctuation">,</span> reponse_header<span class="token punctuation">:</span><span class="token builtin">dict</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> body
</code><button class="copy-code-button">Copy</button></pre></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="WSGI 뜯어보기" dir="auto" class="heading" id="WSGI_뜯어보기"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>WSGI 뜯어보기</h3><div class="heading-children"><div><p dir="auto">이제 실제 파이썬 내부 모듈에서는 WSGI를 어떻게 구현하고 있는지 확인해보자. 파이썬에는 wsgiref라는 모듈이 존재하며 이를 통해 wsgi 웹서버를 구축 가능하게 한다. 아래는 기초적인 WSGI를 내부 모듈을 활용해 구현한 예제이다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">from</span> wsgiref<span class="token punctuation">.</span>util <span class="token keyword">import</span> setup_testing_defaults
<span class="token keyword">from</span> wsgiref<span class="token punctuation">.</span>simple_server <span class="token keyword">import</span> make_server

<span class="token comment"># A relatively simple WSGI application. It's going to print out the</span>
<span class="token comment"># environment dictionary after being updated by setup_testing_defaults</span>
<span class="token keyword">def</span> <span class="token function">simple_app</span><span class="token punctuation">(</span>environ<span class="token punctuation">,</span> start_response<span class="token punctuation">)</span><span class="token punctuation">:</span>
    setup_testing_defaults<span class="token punctuation">(</span>environ<span class="token punctuation">)</span>

    status <span class="token operator">=</span> <span class="token string">'200 OK'</span>
    headers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span> <span class="token string">'text/plain; charset=utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

    start_response<span class="token punctuation">(</span>status<span class="token punctuation">,</span> headers<span class="token punctuation">)</span>

    ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">"%s: %s\n"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>
           <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> environ<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> ret

<span class="token keyword">with</span> make_server<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token number">8000</span><span class="token punctuation">,</span> simple_app<span class="token punctuation">)</span> <span class="token keyword">as</span> httpd<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Serving on port 8000..."</span><span class="token punctuation">)</span>
    httpd<span class="token punctuation">.</span>serve_forever<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#서버 구동</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">코드를 살펴보면 이전에 언급 했던 규칙에 따라 콜러블 어플리케이션 객체를 전달 받아 실행하고 어플리케이션은<code class="code-styler-inline">environ</code>과 <code class="code-styler-inline">start_response</code>를 매개변수로 갖는 것을 확인할 수 있다. </p></div><div><p dir="auto">다른 파이썬 기본 서버들과 마찬가지로 wsfiref는 요청을 받는 소켓 서버와 요청을 처리하는 핸들러로 구성된다. </p></div><div><p dir="auto">우선적으로 <code class="code-styler-inline">make_server</code>를 살펴보자. <code class="code-styler-inline">WSGIServer</code>와 <code class="code-styler-inline">WSGIRequestHandler</code>를 활용하는 서버를 구축하는 것을 확인할 수 있다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">def</span> <span class="token function">make_server</span><span class="token punctuation">(</span>
    host<span class="token punctuation">,</span> port<span class="token punctuation">,</span> app<span class="token punctuation">,</span> server_class<span class="token operator">=</span>WSGIServer<span class="token punctuation">,</span> handler_class<span class="token operator">=</span>WSGIRequestHandler
<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Create a new WSGI server listening on `host` and `port` for `app`"""</span>
    server <span class="token operator">=</span> server_class<span class="token punctuation">(</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span> port<span class="token punctuation">)</span><span class="token punctuation">,</span> handler_class<span class="token punctuation">)</span> <span class="token comment">#WSGI서버와 핸들러를 사용해 서버를 생성한다.</span>
    server<span class="token punctuation">.</span>set_app<span class="token punctuation">(</span>app<span class="token punctuation">)</span> <span class="token comment">#실행할 어플리케이션을 설정</span>
    <span class="token keyword">return</span> server
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">WSGIServer는 다음과 같은 상속 구조를 갖는다. </p></div><div><p dir="auto"><img src="https://obs3dian.s3.ap-northeast-2.amazonaws.com/WSGI%20/%20Pasted%20image%2020240514142452.png" referrerpolicy="no-referrer"></p></div><div><p dir="auto">상속 받는 형태를 살펴보면 CGI 서버와 흡사하게 동작할 것이라는 것을 추측할 수 있는데 실제로 비슷하다.</p></div><div><p dir="auto">WSGI 서버에서 별도로 수행하는 작업은 매개변수로 전달 받은 어플리케이션을 설정하는 행위가 전부이다. 아래 WSGI 서버 코드를 살펴보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">class</span> <span class="token class-name">WSGIServer</span><span class="token punctuation">(</span>HTTPServer<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token triple-quoted-string string">"""BaseHTTPServer that implements the Python WSGI protocol"""</span>

    application <span class="token operator">=</span> <span class="token boolean">None</span>

    <span class="token keyword">def</span> <span class="token function">server_bind</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Override server_bind to store the server name."""</span>
        HTTPServer<span class="token punctuation">.</span>server_bind<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setup_environ<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">setup_environ</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Set up base environment</span>
        env <span class="token operator">=</span> self<span class="token punctuation">.</span>base_environ <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        env<span class="token punctuation">[</span><span class="token string">'SERVER_NAME'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>server_name
        env<span class="token punctuation">[</span><span class="token string">'GATEWAY_INTERFACE'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'CGI/1.1'</span>
        env<span class="token punctuation">[</span><span class="token string">'SERVER_PORT'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>server_port<span class="token punctuation">)</span>
        env<span class="token punctuation">[</span><span class="token string">'REMOTE_HOST'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">''</span>
        env<span class="token punctuation">[</span><span class="token string">'CONTENT_LENGTH'</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token string">''</span>
        env<span class="token punctuation">[</span><span class="token string">'SCRIPT_NAME'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">''</span>

    <span class="token keyword">def</span> <span class="token function">get_app</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>application

    <span class="token keyword">def</span> <span class="token function">set_app</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>application<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>application <span class="token operator">=</span> application
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">코드를 확인해보면 WSGI 사용을 위한 몇가지 설정만 진행하고 별도의 작업은 진행하지 않는다. 실질적으로 서버를 구동하는 <code class="code-styler-inline">serve_forever()</code>는 CGI와 동일하게 처리한다. <a data-href="CGI#CGI의 동작 방식" href="network/cgi.html#CGI의_동작_방식" class="internal-link" target="_self" rel="noopener">CGI &gt; CGI의 동작 방식</a></p></div><div><p dir="auto">이에따라 <strong>WSGI도 리퀘스트 핸들러에 의해 호출되는 <code class="code-styler-inline">set()</code> , <code class="code-styler-inline">handle()</code>, <code class="code-styler-inline">finish()</code>의 절차로 요청을 처리하게 된다.</strong></p></div><div><p dir="auto">이제 <code class="code-styler-inline">WSGIRequestHandler</code>를 뜯어 어떻게 요청을 처리 하는지 확인해보자. <code class="code-styler-inline">WSGIRequestHandler</code> 에서 가장 핵심이 되는 부분은 요청을 처리하는 <code class="code-styler-inline">handle()</code>이다. 아래 메서드를 살펴보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">class</span> <span class="token class-name">WSGIRequestHandler</span><span class="token punctuation">(</span>BaseHTTPRequestHandler<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">def</span> <span class="token function">handle</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Handle a single HTTP request"""</span>

        self<span class="token punctuation">.</span>raw_requestline <span class="token operator">=</span> self<span class="token punctuation">.</span>rfile<span class="token punctuation">.</span>readline<span class="token punctuation">(</span><span class="token number">65537</span><span class="token punctuation">)</span> <span class="token comment">#메시지 수신</span>
        <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>raw_requestline<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">65536</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>requestline <span class="token operator">=</span> <span class="token string">''</span>
            self<span class="token punctuation">.</span>request_version <span class="token operator">=</span> <span class="token string">''</span>
            self<span class="token punctuation">.</span>command <span class="token operator">=</span> <span class="token string">''</span>
            self<span class="token punctuation">.</span>send_error<span class="token punctuation">(</span><span class="token number">414</span><span class="token punctuation">)</span> <span class="token comment">#uri too long</span>
            <span class="token keyword">return</span>

        <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>parse_request<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment"># An error code has been sent, just exit</span>
            <span class="token keyword">return</span>

        handler <span class="token operator">=</span> ServerHandler<span class="token punctuation">(</span>
            self<span class="token punctuation">.</span>rfile<span class="token punctuation">,</span> self<span class="token punctuation">.</span>wfile<span class="token punctuation">,</span> self<span class="token punctuation">.</span>get_stderr<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> self<span class="token punctuation">.</span>get_environ<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            multithread<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token comment">#서버 핸들러 생성</span>
        handler<span class="token punctuation">.</span>request_handler <span class="token operator">=</span> self      <span class="token comment"># backpointer for logging</span>
        handler<span class="token punctuation">.</span>run<span class="token punctuation">(</span>self<span class="token punctuation">.</span>server<span class="token punctuation">.</span>get_app<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">#실질적인 어플리케이션 실행</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">메서드를 살펴보면 <code class="code-styler-inline">ServerHandler</code>라는 클래스를 생성하고 <strong>이를 활용해 전달 받은 application을 실행하는 것을 확인할 수 있다</strong>. 이때 <code class="code-styler-inline">ServerHandler</code>는 로깅 등의 단순한 처리만 진행하고 실질적인 요청의 처리와 결과의 반환은 이의 부모 클래스인 <code class="code-styler-inline">SimpleHandler</code>와 <code class="code-styler-inline">BaseHandler</code>에서 처리된다. <code class="code-styler-inline">SimpleHandler</code> 코드부터 살펴보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">class</span> <span class="token class-name">SimpleHandler</span><span class="token punctuation">(</span>BaseHandler<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Handler that's just initialized with streams, environment, etc.

    This handler subclass is intended for synchronous HTTP/1.0 origin servers,
    and handles sending the entire response output, given the correct inputs.

    Usage::

        handler = SimpleHandler(
            inp,out,err,env, multithread=False, multiprocess=True
        )
        handler.run(app)"""</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>stdin<span class="token punctuation">,</span>stdout<span class="token punctuation">,</span>stderr<span class="token punctuation">,</span>environ<span class="token punctuation">,</span>
        multithread<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span> multiprocess<span class="token operator">=</span><span class="token boolean">False</span>
    <span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>stdin <span class="token operator">=</span> stdin
        self<span class="token punctuation">.</span>stdout <span class="token operator">=</span> stdout
        self<span class="token punctuation">.</span>stderr <span class="token operator">=</span> stderr
        self<span class="token punctuation">.</span>base_env <span class="token operator">=</span> environ
        self<span class="token punctuation">.</span>wsgi_multithread <span class="token operator">=</span> multithread
        self<span class="token punctuation">.</span>wsgi_multiprocess <span class="token operator">=</span> multiprocess
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">요청 정보 수신 및 응답 정보 반환을 위한 표준 입,출력의 설정 정보와 서버의 설정 정보등이 저장돼 있는 것을 확인할 수 있다. 하지만 어플리케이션을 실행하는 <code class="code-styler-inline">run</code> 메서드는 <code class="code-styler-inline">BaseHandler</code>에 정의 돼있다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">class</span> <span class="token class-name">BaseHandler</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""Manage the invocation of a WSGI application"""</span>

    <span class="token comment"># Configuration parameters; can override per-subclass or per-instance</span>
    wsgi_version <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    wsgi_multithread <span class="token operator">=</span> <span class="token boolean">True</span>
    wsgi_multiprocess <span class="token operator">=</span> <span class="token boolean">True</span>
    wsgi_run_once <span class="token operator">=</span> <span class="token boolean">False</span>

    origin_server <span class="token operator">=</span> <span class="token boolean">True</span>    <span class="token comment"># We are transmitting direct to client</span>
    http_version  <span class="token operator">=</span> <span class="token string">"1.0"</span>   <span class="token comment"># Version that should be used for response</span>
    server_software <span class="token operator">=</span> <span class="token boolean">None</span>  <span class="token comment"># String name of server software, if any</span>

    <span class="token comment"># os_environ is used to supply configuration from the OS environment:</span>
    <span class="token comment"># by default it's a copy of 'os.environ' as of import time, but you can</span>
    <span class="token comment"># override this in e.g. your __init__ method.</span>
    os_environ<span class="token operator">=</span> read_environ<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment"># Collaborator classes</span>
    wsgi_file_wrapper <span class="token operator">=</span> FileWrapper     <span class="token comment"># set to None to disable</span>
    headers_class <span class="token operator">=</span> Headers             <span class="token comment"># must be a Headers-like class</span>

    <span class="token comment"># Error handling (also per-subclass or per-instance)</span>
    traceback_limit <span class="token operator">=</span> <span class="token boolean">None</span>  <span class="token comment"># Print entire traceback to self.get_stderr()</span>
    error_status <span class="token operator">=</span> <span class="token string">"500 Internal Server Error"</span>
    error_headers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span><span class="token string">'text/plain'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    error_body <span class="token operator">=</span> <span class="token string">b"A server error occurred.  Please contact the administrator."</span>

    <span class="token comment"># State variables (don't mess with these)</span>
    status <span class="token operator">=</span> result <span class="token operator">=</span> <span class="token boolean">None</span>
    headers_sent <span class="token operator">=</span> <span class="token boolean">False</span>
    headers <span class="token operator">=</span> <span class="token boolean">None</span>
    bytes_sent <span class="token operator">=</span> <span class="token number">0</span>

    <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> application<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Invoke the application"""</span>
        <span class="token comment"># Note to self: don't move the close()!  Asynchronous servers shouldn't</span>
        <span class="token comment"># call close() from finish_response(), so if you close() anywhere but</span>
        <span class="token comment"># the double-error branch here, you'll break asynchronous servers by</span>
        <span class="token comment"># prematurely closing.  Async servers must return from 'run()' without</span>
        <span class="token comment"># closing if there might still be output to iterate over.</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>setup_environ<span class="token punctuation">(</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>result <span class="token operator">=</span> application<span class="token punctuation">(</span>self<span class="token punctuation">.</span>environ<span class="token punctuation">,</span> self<span class="token punctuation">.</span>start_response<span class="token punctuation">)</span> <span class="token comment">#어플리케이션 수행</span>
            self<span class="token punctuation">.</span>finish_response<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#응답 종료</span>
        <span class="token keyword">except</span> <span class="token punctuation">(</span>ConnectionAbortedError<span class="token punctuation">,</span> BrokenPipeError<span class="token punctuation">,</span> ConnectionResetError<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token comment"># We expect the client to close the connection abruptly from time</span>
            <span class="token comment"># to time.</span>
            <span class="token keyword">return</span>
        <span class="token keyword">except</span><span class="token punctuation">:</span>
            <span class="token keyword">try</span><span class="token punctuation">:</span>
                self<span class="token punctuation">.</span>handle_error<span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token keyword">except</span><span class="token punctuation">:</span>
                <span class="token comment"># If we get an error handling an error, just give up already!</span>
                self<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token keyword">raise</span>   <span class="token comment"># ...and let the actual server figure it out.</span>

</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><code class="code-styler-inline">self.result = application(self.environ, self.start_response)</code> 를 확인해보면 이전에 말했던 것과 같이 환경변수를 활용한 연결 정보와 응답 처리를 위한 콜러블 객체를 매개변수로 전달 받는다.</p></div><div><p dir="auto"><code class="code-styler-inline">start_response</code>는 별 다른 일을 수행하지 않기에 생략하고 <code class="code-styler-inline">finish_response()</code> 메서드를 살펴보자.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">class</span> <span class="token class-name">BaseHandler</span><span class="token punctuation">:</span>   
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">def</span> <span class="token function">finish_response</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">"""Send any iterable data, then close self and the iterable
        """</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>result_is_file<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">or</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>sendfile<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                <span class="token keyword">for</span> data <span class="token keyword">in</span> self<span class="token punctuation">.</span>result<span class="token punctuation">:</span>
                    self<span class="token punctuation">.</span>write<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
                self<span class="token punctuation">.</span>finish_content<span class="token punctuation">(</span><span class="token punctuation">)</span>
	
	<span class="token keyword">def</span> <span class="token function">write</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">elif</span> <span class="token keyword">not</span> self<span class="token punctuation">.</span>headers_sent<span class="token punctuation">:</span>
            <span class="token comment"># Before the first output, send the stored headers</span>
            self<span class="token punctuation">.</span>bytes_sent <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>    <span class="token comment"># make sure we know content-length</span>
            self<span class="token punctuation">.</span>send_headers<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>bytes_sent <span class="token operator">+=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        
        self<span class="token punctuation">.</span>_write<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>_flush<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto"><code class="code-styler-inline">finish_response()</code> 에서 전송할 응답 데이터를 전송한다. <code class="code-styler-inline">write()</code> 메서드에서 이를 처리하는데 실질적인 소켓에 데이터를 내보내는 <code class="code-styler-inline">_write()</code>,<code class="code-styler-inline">_flush()</code> 은 <code class="code-styler-inline">SimpleHandler</code>에 정의돼 있다.</p></div><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">class</span> <span class="token class-name">SimpleHandler</span><span class="token punctuation">(</span>BaseHandler<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token keyword">def</span> <span class="token function">_write</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        result <span class="token operator">=</span> self<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token comment">#표준 출력으로 CGI에 전달</span>
        <span class="token keyword">if</span> result <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> result <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
            data <span class="token operator">=</span> data<span class="token punctuation">[</span>result<span class="token punctuation">:</span><span class="token punctuation">]</span>
            <span class="token keyword">if</span> <span class="token keyword">not</span> data<span class="token punctuation">:</span>
                <span class="token keyword">break</span>
            result <span class="token operator">=</span> self<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>write<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
            
    <span class="token keyword">def</span> <span class="token function">_flush</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>flush<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>_flush <span class="token operator">=</span> self<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>flush
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">코드를 확인해보면 <strong>표준 출력으로 데이터를 전송하는 것을 볼 수 있다. 이때 표준 출력이 실제 표준 출력이 아닌 웹서버 소켓을 의미하기 때문에 실질적으론 연결된 클라이언트의 소켓으로 데이터를 전송한다.</strong> (CGI와는 동작 방식이 다름) </p></div><div><p dir="auto">그럼에도 표준 출력으로 전송하는 이유는 그것이 CGI의 규칙이기 때문이라 생각한다. (뇌피셜)<br>
CGI를 살펴봤을 때 <a data-href="CGI#CGI의 동작 방식" href="network/cgi.html#CGI의_동작_방식" class="internal-link" target="_self" rel="noopener">CGI &gt; CGI의 동작 방식</a> 에서 <code class="code-styler-inline">dup2</code> 시스템 콜을 활용해 소켓의 버퍼 내용을 표준 출력에 덮어 쓰는 것을 확인할 수 있었다. 그래서 아마도.. 이 wsgi 코드 역시 앞단에 CGI가 존재함을 가정하고 작성해서 그런 일이 발생한 것이 아닐까 싶다.. (CGI를 끼면 표준 출력으로 나가니까)</p></div><div><hr dir="auto"></div></div></div><div class="heading-wrapper"><h3 data-heading="WSGI 서버 돌려보기" dir="auto" class="heading" id="WSGI_서버_돌려보기"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>WSGI 서버 돌려보기</h3><div class="heading-children"><div><pre dir="auto" class="language-python" tabindex="0"><code class="language-python is-loaded"><span class="token keyword">from</span> wsgiref<span class="token punctuation">.</span>util <span class="token keyword">import</span> setup_testing_defaults
<span class="token keyword">from</span> wsgiref<span class="token punctuation">.</span>simple_server <span class="token keyword">import</span> make_server

<span class="token comment"># A relatively simple WSGI application. It's going to print out the</span>
<span class="token comment"># environment dictionary after being updated by setup_testing_defaults</span>
<span class="token keyword">def</span> <span class="token function">simple_app</span><span class="token punctuation">(</span>environ<span class="token punctuation">,</span> start_response<span class="token punctuation">)</span><span class="token punctuation">:</span>
    setup_testing_defaults<span class="token punctuation">(</span>environ<span class="token punctuation">)</span>

    status <span class="token operator">=</span> <span class="token string">'200 OK'</span>
    headers <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">'Content-type'</span><span class="token punctuation">,</span> <span class="token string">'text/plain; charset=utf-8'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

    start_response<span class="token punctuation">(</span>status<span class="token punctuation">,</span> headers<span class="token punctuation">)</span>

    ret <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string">"%s: %s\n"</span> <span class="token operator">%</span> <span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>encode<span class="token punctuation">(</span><span class="token string">"utf-8"</span><span class="token punctuation">)</span>
           <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token keyword">in</span> environ<span class="token punctuation">.</span>items<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> ret

<span class="token keyword">with</span> make_server<span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token number">8000</span><span class="token punctuation">,</span> simple_app<span class="token punctuation">)</span> <span class="token keyword">as</span> httpd<span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"Serving on port 8000..."</span><span class="token punctuation">)</span>
    httpd<span class="token punctuation">.</span>serve_forever<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">#서버 구동</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><p dir="auto">이제 위의 코드를 실습 해보자. 우리가 확인해야 할것은 아래와 같다.</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><strong>HTTP 요청 -&gt; 함수로 대응 되는지</strong></li>
<li data-line="1" dir="auto"><strong>응답이 잘 오는지</strong></li>
</ul></div><div><p dir="auto"><code class="code-styler-inline">curl -X GET "127.0.0.1:8000?a=4&amp;b=4"</code> 와 같은 요청을 보내보자. 함수가 적절하게 실행되는 것을 확인할 수 있다.</p></div><div><pre dir="auto" class="language-bash" tabindex="0"><code class="language-bash is-loaded"><span class="token punctuation">..</span>.
REQUEST_METHOD: GET
PATH_INFO: /
QUERY_STRING: <span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">4</span>
REMOTE_ADDR: <span class="token number">127.0</span>.0.1
CONTENT_TYPE: text/plain
HTTP_HOST: <span class="token number">127.0</span>.0.1:8000
HTTP_USER_AGENT: curl/8.4.0
HTTP_ACCEPT: */*
wsgi.input: <span class="token operator">&lt;</span>_io.BufferedReader <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token operator"><span class="token file-descriptor important">6</span>&gt;</span>
wsgi.errors: <span class="token operator">&lt;</span>_io.TextIOWrapper <span class="token assign-left variable">name</span><span class="token operator">=</span><span class="token string">'&lt;stderr&gt;'</span> <span class="token assign-left variable">mode</span><span class="token operator">=</span><span class="token string">'w'</span> <span class="token assign-left variable">encoding</span><span class="token operator">=</span><span class="token string">'utf-8'</span><span class="token operator">&gt;</span>
wsgi.version: <span class="token punctuation">(</span><span class="token number">1</span>, <span class="token number">0</span><span class="token punctuation">)</span>
wsgi.run_once: False
wsgi.url_scheme: http
wsgi.multithread: False
wsgi.multiprocess: False
wsgi.file_wrapper: <span class="token operator">&lt;</span>class <span class="token string">'wsgiref.util.FileWrapper'</span><span class="token operator">&gt;</span>
</code><button class="copy-code-button">Copy</button></pre></div><div><hr dir="auto"></div><div class="mod-footer"></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="network/wsgi.html#WSGI"><div class="tree-item-contents heading-link" heading-name="WSGI"><span class="tree-item-title">WSGI</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="network/wsgi.html#출처"><div class="tree-item-contents heading-link" heading-name="출처"><span class="tree-item-title">출처</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="network/wsgi.html#개요"><div class="tree-item-contents heading-link" heading-name="개요"><span class="tree-item-title">개요</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="network/wsgi.html#WSGI란"><div class="tree-item-contents heading-link" heading-name="WSGI란"><span class="tree-item-title">WSGI란</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="network/wsgi.html#WSGI의_구조"><div class="tree-item-contents heading-link" heading-name="WSGI의 구조"><span class="tree-item-title">WSGI의 구조</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="network/wsgi.html#WSGI_정리"><div class="tree-item-contents heading-link" heading-name="WSGI 정리"><span class="tree-item-title">WSGI 정리</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="network/wsgi.html#WSGI의_규칙들"><div class="tree-item-contents heading-link" heading-name="WSGI의 규칙들"><span class="tree-item-title">WSGI의 규칙들</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="network/wsgi.html#WSGI_뜯어보기"><div class="tree-item-contents heading-link" heading-name="WSGI 뜯어보기"><span class="tree-item-title">WSGI 뜯어보기</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="network/wsgi.html#WSGI_서버_돌려보기"><div class="tree-item-contents heading-link" heading-name="WSGI 서버 돌려보기"><span class="tree-item-title">WSGI 서버 돌려보기</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>